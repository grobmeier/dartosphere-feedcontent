---
title: 'Packaging Inkscape SVG for Polymer Custom Elements'
layout: post
published: '2014-05-19T23:59:00-04:00'
feed: 'japh(r) by Chris Strom'
link: 'http://feedproxy.google.com/~r/JaphrByChrisStrom/~3/QbcADiX7AY0/packaging-inkscape-svg-for-polymer.html'
author:
    name: 'Chris Strom'
    email: noreply@blogger.com
    url: 'https://plus.google.com/117928918793969810642'
tags:
    - chain
    - dart
    - dartlang
    - inkscape
    - polymer
    - svg

---

<div class=top-chain-links></div><br />Tonight I would like to switch over all of the SVG pizza toppings in the <code>&lt;x-pizza></code> <a href="http://www.polymer-project.org/">Polymer</a> custom element to individual SVG files. Using last night's approach to creating topping icons, I create a green pepper SVG in Inkscape:<br /><br /><a href="http://4.bp.blogspot.com/-EGzcQyk7mis/U3rINx7pbGI/AAAAAAAAZis/2tUY_H6UrOc/s1600/01-green_pepper_svg.png" imageanchor="1" ><img border="0" src="http://4.bp.blogspot.com/-EGzcQyk7mis/U3rINx7pbGI/AAAAAAAAZis/2tUY_H6UrOc/s320/01-green_pepper_svg.png" /></a><br /><br />As well as a sausage SVG:<br /><br /><a href="http://3.bp.blogspot.com/-_HFiSzFHg1g/U3rIQNfmJrI/AAAAAAAAZi0/i4IfdZWqNmY/s1600/02-sausage_svg.png" imageanchor="1" ><img border="0" src="http://3.bp.blogspot.com/-_HFiSzFHg1g/U3rIQNfmJrI/AAAAAAAAZi0/i4IfdZWqNmY/s320/02-sausage_svg.png" /></a><br /><br />I actually forget to delete the default layer in the first one, but a quick inspection of the SVG contents reveals the dead-giveaway of the <code>&lt;g></code> tag and I redo the image.<br /><br />Inside the <a href="https://www.dartlang.org/polymer-dart/">Polymer.dart</a> code, I am still generating an SVG <code>&lt;image></code> to be added to the main SVG definition of the pizza crust and cheese. Since the only difference between the two new toppings and the previous implementation of the pepperoni topping will be the filename of the SVG icon, I have the opportunity for some code reuse:<pre class=prettyprint><code>  _svgPepperoni()   => _svgImage('pepperoni');<br />  _svgSausage()     => _svgImage('sausage');<br />  _svgGreenPepper() => _svgImage('green_pepper');<br /><br />  _svgImage(basename) {<br />    var svgImage = new ImageElement()<br />      ..setAttributeNS(<br />          'http://www.w3.org/1999/xlink',<br />          'href',<br />          '/assets/svg_example/$basename.svg'<br />        )<br />      ..setAttribute('width', '16')<br />      ..setAttribute('height', '16');<br /><br />    return new GElement()<br />      ..append(svgImage);<br />  }</code></pre>Just like that, I see my new SVG images on the <code>&lt;x-pizza></code> custom pizza builder:<br /><br /><a href="http://4.bp.blogspot.com/-J-SAh5X8l_o/U3rLv9hW32I/AAAAAAAAZjI/pN2ThKbynO0/s1600/03-x_pizza_with_svg_images.png" imageanchor="1" ><img border="0" src="http://4.bp.blogspot.com/-J-SAh5X8l_o/U3rLv9hW32I/AAAAAAAAZjI/pN2ThKbynO0/s400/03-x_pizza_with_svg_images.png" /></a><br /><br />The green peppers should probably be slightly thicker, but that aside, it is pretty cool to be able to add my SVG images that quickly. <br /><br />Before calling it a night, I need to address a warning that I get from <a href="http://pub.dartlang.org/">Dart Pub</a>'s smoke-testing web server:<pre class=prettyprint>➜  dart git:(master) ✗ pub serve<br /><b>Warning: Pub reserves paths containing "assets" for using assets from packages.<br />Please rename the directory "build/assets".</b><br />Loading source assets... <br />Loading observe transformers... (3.8s)<br />Loading polymer transformers... (2.0s)<br />Serving svg_example web  on http://localhost:8080<br />Serving svg_example test on http://localhost:8081<br />Build completed successfully</pre>It seems that the <code>assets</code> directory in Pub packages is going away. I heartily approve of this move as it was overly complex. But, for these SVG image assets to work when the <code>&lt;x-pizza></code> element is installed and used in other applications, I need to move these files. Instead of residing in <code>assets</code>, I need to move them into the <code>lib</code> directory. I opt to place CSS for my custom element into <code>lib/styles</code> and my SVG images into <code>lib/images</code>:<pre class=prettyprint>➜  dart git:(master) ✗ mkdir lib/styles<br />➜  dart git:(master) ✗ mkdir lib/images<br />➜  dart git:(master) ✗ mv asset/*.svg lib/images<br />➜  dart git:(master) ✗ mv asset/*.css lib/styles<br />➜  dart git:(master) ✗ rmdir asset <br /></pre>The new location means that the images are now accessed from the <code>/packages/&lt;package_name>/images</code> path, so I update the <code>_svgImage()</code> method accordingly for this <code>svg_example</code> package:<pre class=prettyprint><code>  _svgImage(basename) {<br />    var svgImage = new ImageElement()<br />      ..setAttributeNS(<br />          'http://www.w3.org/1999/xlink',<br />          'href',<br /><b>          '/packages/svg_example/images/$basename.svg'</b><br />        )<br />      ..setAttribute('width', '16')<br />      ..setAttribute('height', '16');<br /><br />    return new GElement()<br />      ..append(svgImage);<br />  }</code></pre>With that, I no longer have any warnings when I start the Pub web server:<pre class=prettyprint>➜  dart git:(master) ✗ pub serve        <br />Loading source assets... <br />Loading observe transformers... (3.9s)<br />Loading polymer transformers... (1.9s)<br />Serving svg_example web  on http://localhost:8080<br />Serving svg_example test on http://localhost:8081<br />Build completed successfully<br /></pre>And everything continues to work as before.<br /><br />I do believe that I am getting the hang of this SVG stuff in Inkscape. Up tomorrow, I plan to explore Dart's SVG facilities a little more.<br /><br /><br /><br /><span style="color: #ccc">Day #68</span>  <br /><br /><p class=bottom-chain-links><a href="http://japhr.blogspot.com/2014/05/drawing-simple-svg-and-xml-in-inkscape.html">&lsaquo;prev</a> | <a href="http://japhr.blogspot.com/2013/11/new-chain-patterns-in-polymer.html">My Chain</a> | <a href="http://japhr.blogspot.com/2014/05/limited-svg-manipulation-in-dart.html">next&rsaquo;</a> </p><script>var b_links = document.getElementsByClassName('bottom-chain-links'),      t_links = document.getElementsByClassName('top-chain-links');  if (b_links.length == 1 && t_links.length == 1) {   t_links[0].innerHTML = b_links[0].innerHTML; } </script><img src="http://feeds.feedburner.com/~r/JaphrByChrisStrom/~4/QbcADiX7AY0" height="1" width="1"/>
