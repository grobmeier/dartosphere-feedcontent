---
title: 'The Caretaker, Mel, and One Velvet Fog Machine to Rule Them All'
layout: post
published: '2015-12-05T23:12:00-08:00'
feed: 'japh(r) by Chris Strom'
link: 'http://feedproxy.google.com/~r/JaphrByChrisStrom/~3/Xmz0phEgKfs/the-caretaker-mel-and-one-velvet-fog.html'
author:
    name: 'Chris Strom'
    email: noreply@blogger.com
    url: 'https://plus.google.com/117928918793969810642'
tags:
    - chain
    - dart
    - dartlang
    - 'design patterns'
    - memento
    - singleton

---

<div class=top-chain-links></div><br />Once upon a time there was a wise a benevolent creature known as the Caretaker:<br /><br /><a href="http://2.bp.blogspot.com/-6lahIZa-LqY/VmPXkcGH_kI/AAAAAAABBv0/h46YCtJGzl8/s1600/Caretaker.png" imageanchor="1" ><img border="0" src="http://2.bp.blogspot.com/-6lahIZa-LqY/VmPXkcGH_kI/AAAAAAABBv0/h46YCtJGzl8/s320/Caretaker.png" /></a><br /><br />The Caretaker was responsible for playing the ultimate selections of Mel Tormé music on the magnificent Velvet Fog Machine:<br /><br /><a href="http://4.bp.blogspot.com/-tskFvq8cJUc/VmPX9WubmUI/AAAAAAABBv8/S-Uwxtt4-Z0/s1600/Caretaker.png" imageanchor="1" ><img border="0" src="http://4.bp.blogspot.com/-tskFvq8cJUc/VmPX9WubmUI/AAAAAAABBv8/S-Uwxtt4-Z0/s400/Caretaker.png" /></a><br /><br />Every now and then the Caretaker got special coins that remembered a particular song at a particular time:<br /><br /><a href="http://3.bp.blogspot.com/-LgrJnD2gGRs/VmPZsGqxO_I/AAAAAAABBwI/VGI66jpV56w/s1600/Caretaker.png" imageanchor="1" ><img border="0" src="http://3.bp.blogspot.com/-LgrJnD2gGRs/VmPZsGqxO_I/AAAAAAABBwI/VGI66jpV56w/s400/Caretaker.png" /></a><br /><br />The Caretaker could used these to got back to these very special moments. <br /><br /><a href="http://3.bp.blogspot.com/-uFXimiMy7FE/VmPaSKfPhWI/AAAAAAABBwQ/b-dPwF-RXYA/s1600/Caretaker.png" imageanchor="1" ><img border="0" src="http://3.bp.blogspot.com/-uFXimiMy7FE/VmPaSKfPhWI/AAAAAAABBwQ/b-dPwF-RXYA/s400/Caretaker.png" /></a><br /><br />The Caretaker had no idea how the Velvet Fog Machine knew what to do with these coins and did not care. Mel Tormé played all the time and special moments could be had a plenty.<br /><br />But one day something strange happened. The Caretaker tried something a little different and... all of the sudden there were three identical (but for the <code>hashCode</code>) velvet fog machines:<br /><br /><a href="http://2.bp.blogspot.com/-MO3-Dwl1w_Y/VmPc2UQ14xI/AAAAAAABBwg/fo28sC4CVJg/s1600/Caretaker.png" imageanchor="1" ><img border="0" src="http://2.bp.blogspot.com/-MO3-Dwl1w_Y/VmPc2UQ14xI/AAAAAAABBwg/fo28sC4CVJg/s400/Caretaker.png" /></a><br /><br />This was confusing to the Caretaker and seemed likely to cause more problems in a life that should be dedicated to Melvie. So that Caretaker decided that the <code>VelvetFogMachine</code> needed to be a singleton. Happily, the Caretaker favored bliss and so was programming with <a href="http://dartlang.org">Dart</a>. And so a factory constructor was able to resolve these woes:<pre class=prettyprint>class VelvetFogMachine {<br />  // ...<br />  static final VelvetFogMachine _vfm = new VelvetFogMachine._internal();<br />  factory VelvetFogMachine() => _vfm;<br />  VelvetFogMachine._internal();<br />  // ...<br />}</pre>With that, the originator of the magical best-of-Mel coins, the <code>VelvetFogMachine</code> would always return the same <code>_vfm</code> instance of itself. So there was one instance of the velvet fog machine no matter how the Caretake might interact with it:<br /><br /><a href="http://2.bp.blogspot.com/-RZacETXZ-kM/VmPfFk1YE5I/AAAAAAABBws/UfOBolMM03k/s1600/Caretaker.png" imageanchor="1" ><img border="0" src="http://2.bp.blogspot.com/-RZacETXZ-kM/VmPfFk1YE5I/AAAAAAABBws/UfOBolMM03k/s400/Caretaker.png" /></a><br /><br />And the Caretakee could enjoy Mel until the end of days. And the Caretaker was happy.<br /><br /><br /><span style="color: #ccc">Day #24</span>  <br /><br /><p class=bottom-chain-links><a href="http://japhr.blogspot.com/2015/12/im-pretty-answer-is-going-to-be-dont.html">&lsaquo;prev</a> | <a href="http://japhr.blogspot.com/2015/11/design-patterns-in-dart.html">My Chain</a> | <span style="color: #ccc">next&rsaquo;</span> </p><script>var b_links = document.getElementsByClassName('bottom-chain-links'),      t_links = document.getElementsByClassName('top-chain-links');  if (b_links.length == 1 && t_links.length == 1) {   t_links[0].innerHTML = b_links[0].innerHTML; } </script><img src="http://feeds.feedburner.com/~r/JaphrByChrisStrom/~4/Xmz0phEgKfs" height="1" width="1" alt=""/>
