---
title: 'Creating a lightweight DSL using Dart operator overrides.'
layout: post
published: '2014-10-29T18:49:00-05:00'
feed: 'phylotic connections'
link: 'http://phylotic.blogspot.com/2014/10/creating-lightweight-dsl-using-dart.html'
author:
    name: 'John Evans'
    email: noreply@blogger.com
    url: 'https://plus.google.com/115427174005651655317'
tags:
    - dart
    - dartlang
    - games
    - gaming
    - hakk.it
    - hakkit
    - programming
    - 'programming languages'

---

I'm working on a game called "<a href="http://hakk.it/">hakk.it</a>". &nbsp;hakk.it is 100% written in <a href="http://www.dartlang.org/" target="_blank">Dart </a>and when launched, will be widely available as a modern web application for <i>most </i>devices that support the Chrome browser (I'm looking at you with a raised eyebrow IOS...).<br /><br />The premise of the game is pretty simple, you write special software code called "hakks". &nbsp;These hakks take physical form and combat each other in arenas. &nbsp;In addition to code, the hakks are made up of different types of blocks, each of which the code can make use of in various ways. It's a lot of fun, if I do say so myself.<br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-FIrluOlLL3k/VFFoJx3DePI/AAAAAAAAaXY/m986wPe6I0E/s1600/arena_combat!.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://4.bp.blogspot.com/-FIrluOlLL3k/VFFoJx3DePI/AAAAAAAAaXY/m986wPe6I0E/s1600/arena_combat!.png" height="315" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Early screenshot of a hakk.it arena match in action.</td></tr></tbody></table><br /><h2><span style="font-size: large;">What!? Nobody wants to write code in assembly?</span></h2>This post isn't really about hakk.it. &nbsp;That that will come at a later time. &nbsp;This post is about one challenging aspect of the project that I needed to address. &nbsp;The hakk.it virtual machine (VM) runs a machine language very similar to assembly for any CPU, and and most efficient hakks can be written directly in this machine language I call "hakkML". &nbsp;I want hakk.it to be accessible to beginners and experts alike, and I realized lot of people will find the prospect of coding in assembly quite daunting. &nbsp;I decided that I needed to create an easier way for people to express their code, but at this stage I didn't want to develop a full-fledged DSL, with tooling and everything else that comes along with it (that will come, later).<br /><br /><h2><span style="font-size: large;">Dart To The Rescue!</span></h2>Among the many features I love about Dart, one of my favorite is the ability of <a href="https://www.dartlang.org/docs/dart-up-and-running/ch02.html#classes" target="_blank">override operators</a>. &nbsp;I decided to attempt a DSL that is imbedded in Dart itself. &nbsp;Technically this isn't a DSL. &nbsp;It's more accurately described as a macro language, but as you'll see, it does offer enough expressiveness that it <i>feels </i>like a DSL.<br /><br />I wanted the API to feel flexible and accessible like BASIC, and yet still allow access to the underlying power of the hakk.it hakkML instruction set. &nbsp;This meant that I needed to support inline expressions that, to the programmer, felt like real expressions. &nbsp;I also needed looping and conditional mechanisms that work intuitively. &nbsp;Thanks to the power of Dart, I was able to accomplish all of these goals, and more.<br /><br />Using Dart I'm able to provide an "DSL" to players, and yet still allow them to take advantage of all the great Dart tooling that's already in place, such as the Dart Editor.<br /><br /><h2><span style="font-size: large;">How It Looks</span></h2>Building a hakk with the basic API starts by declaring a name and something called a "system block" which is basically a block containing some memory for the compiler to use. &nbsp;So the basic form of all hakks looks like this:<br /><br /><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> hakk('hello_world');  <br /> Block.system(0, -1);  <br /></code></pre><br />This is valid Dart code, by the way. &nbsp;All you have to do is import the API library (linked later) and start writing a hakk.<br /><br />Next we want the hakk to do something. &nbsp;Well in a normal hakk, we would write code for moving it around, firing weapons, activating defensive capabilities and so on. &nbsp;For the purposes of this article, we'll keep things a bit more simple. &nbsp;Here is an example of "hello world":<br /><br /><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> hakk('hello_world');  <br />   Block.system(0, -1);  <br />   output('Hello World!');  <br /> print(build());  <br /></code></pre><br />That's it. &nbsp;What the build() function does behind the scenes is activate the compiler, which compiles the following hakkML into a string:<br /><br /><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> name: "hello_world"  <br /> blocks:  <br />  - core:  <br />  - mem: {name: "__sys0__", loc: [0, 1]}  <br /> code:  <br />  core:  <br />   - out: "Hello World!"  <br /></code></pre><br />Lets do something a little more advanced. &nbsp;Lets say we want to perform some complex O(n^2) operation (you really, really wouldn't want to do this in a hakk meant for the arena, by the way). &nbsp;In hakk.it every hakk comes standard with a "core" block, which contains 16 memory spaces to store and retrieve information during runtime. &nbsp;The basic API provides an easy way to access these spaces, so lets use them to create something more complex with the API. &nbsp;What follows is a nested FOR/NEXT loop construct, written with the API:<br /><br /><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;">  hakk('for_example');  <br />  Block.system(0, 1);  <br />  FOR(core0 &lt;&lt; 0, core0 &lt; 10, () =&gt; inc(core0));  <br />   output('in core 0');  <br />   FOR(core1 &lt;&lt; 0, core1 &lt; 5, () =&gt; inc(core1));  <br />    output('  in core 1');  <br />   NEXT();   <br />  NEXT();  <br />  print(build());  <br /></code></pre><br />It's very similar to any FOR loop you might be familiar with. &nbsp;The "&lt;&lt;" operator takes the place of "=" because Dart doesn't allow us to override "=". &nbsp;But I think it's better anyway, because in the API what you are actually expressing with that operator is "store the result of the expression on the right side, into the memory location on the left side". &nbsp;In that context, it is more precise than the general purpose "=" is.<br /><br />In the first parameter of the FOR construct, we initialize core0 with 0. &nbsp;In the second parameter we describe our iterator condition (core0 &lt; 10). &nbsp;And in the third parameter, we pass a function that will be called at the end of the loop, in this case simply incrementing the value in core0. &nbsp;Pretty straightforward on the surface. &nbsp;What's happening under the hood though is quite interesting. &nbsp;Each of those operators like "&lt;" is actually an override which looks in code like this:<br /><br /><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;">  _ExpressionNode operator &lt;(next){  <br />   next = _wrapLiteral(next);  <br />   final node = new _ExpressionNode(this, next, 'jl');  <br />   _expressionQueue.add(node);  <br />   return node;  <br />  }  <br /></code></pre><br />The API override "&lt;" in this case, and instead constructs a node that becomes part of an expression tree, which will in turn generate all the hakkML necessary to achieve that expression in the hakk.it VM. &nbsp;I do the same thing with all the other common operators (+, -, *, /, &lt;, &gt;, &amp;, |) and voila! thanks to Dart we have an fully realized expression syntax.<br /><br />In case your wondering, here is the hakkML that our example from above generates on behalf of the programmer:<br /><br /><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;">&nbsp;name: "for_example"</code></pre><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> blocks:  <br />  - core:  <br />  - mem: {name: "__sys0__", loc: [0, 1]}  <br /> code:  <br />  core:  <br />   - set: [core.0, 0]  <br />   - lbl: __while_test_1__  <br />   - jl: [core.0, 10, __istrue_5__]  <br />   - set: [__sys0__.0, false]  <br />   - goto: __logic_finish_5__  <br />   - lbl: __istrue_5__  <br />   - set: [__sys0__.0, true]  <br />   - lbl: __logic_finish_5__  <br />   - je: [__sys0__.0, true, __iftrue_3__]  <br />   - goto: __endif_3__  <br />   - lbl: __iftrue_3__  <br />   - out: "in core 0"  <br />   - set: [core.1, 0]  <br />   - lbl: __while_test_8__  <br />   - jl: [core.1, 5, __istrue_12__]  <br />   - set: [__sys0__.2, false]  <br />   - goto: __logic_finish_12__  <br />   - lbl: __istrue_12__  <br />   - set: [__sys0__.2, true]  <br />   - lbl: __logic_finish_12__  <br />   - je: [__sys0__.2, true, __iftrue_10__]  <br />   - goto: __endif_10__  <br />   - lbl: __iftrue_10__  <br />   - out: "  in core 1"  <br />   - add: [__sys0__.4, core.1, 1]  <br />   - set: [core.1, __sys0__.4]  <br />   - goto: __while_test_8__  <br />   - lbl: __endif_10__  <br />   - add: [__sys0__.3, core.0, 1]  <br />   - set: [core.0, __sys0__.3]  <br />   - goto: __while_test_1__  <br />   - lbl: __endif_3__  <br /></code></pre><br />After viewing the machine language generated, the benefits of having a higher level language become readily apparent. &nbsp;Here is the runtime output of the code itself:<br /><br /><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> in core 0  <br />   in core 1  <br />   in core 1  <br />   in core 1  <br />   in core 1  <br />   in core 1  <br /> in core 0  <br />   in core 1  <br />   in core 1  <br />   in core 1  <br />   in core 1  <br />   in core 1  <br /> in core 0  <br />   in core 1  <br />   in core 1  <br />   in core 1  <br />   in core 1  <br />   in core 1  <br /> in core 0  <br />   in core 1  <br />   in core 1  <br />   in core 1  <br />   in core 1  <br />   in core 1  <br /> in core 0  <br />   in core 1  <br />   in core 1  <br />   in core 1  <br />   in core 1  <br />   in core 1  <br /> in core 0  <br />   in core 1  <br />   in core 1  <br />   in core 1  <br />   in core 1  <br />   in core 1  <br /> in core 0  <br />   in core 1  <br />   in core 1  <br />   in core 1  <br />   in core 1  <br />   in core 1  <br /> in core 0  <br />   in core 1  <br />   in core 1  <br />   in core 1  <br />   in core 1  <br />   in core 1  <br /> in core 0  <br />   in core 1  <br />   in core 1  <br />   in core 1  <br />   in core 1  <br />   in core 1  <br /> in core 0  <br />   in core 1  <br />   in core 1  <br />   in core 1  <br />   in core 1  <br />   in core 1  <br /></code></pre><br /><h2>The Real Power of Using Dart, Combinators</h2>I won't go into other aspects of the API itself. &nbsp;I'll do that in some video tutorials later. &nbsp;But the API supports other standard constructs like WHILE/ENDWHILE, IF/THEN, and GOSUB/RETURN. &nbsp;GOSUB incidentally, provides support for passing parameters and returning a result. &nbsp;It's not as robust as closures, but good enough for the limited purpose of what hakks are intended for.<br /><br />With all this in place, it's now possible to use the API itself to construct higher-level functionality. &nbsp;Convenience functions, that would help beginners and people getting to know hakk.it get up and running faster. &nbsp;Take for example this function provided by the API:<br /><br /><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> faceEnemy();  <br /></code></pre><br />faceEnemy() orients the hakk toward the nearest opponent in the arena. &nbsp;It uses the API itself to build up the logic necessary to perform the action it is intended for. &nbsp;Here's the actual function:<br /><br /><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> _HakkObject faceEnemy(){  <br />  _HakkObject result = _MMU.malloc('face_enemy');  <br />  _HakkObject x = _MMU.malloc('face_enemy');  <br />  _HakkObject y = _MMU.malloc('face_enemy');  <br />  locateEnemy();  <br />  x &lt;&lt; pop();  <br />  y &lt;&lt; pop();  <br />  output('enemy location');  <br />  vectorTo(x, y);  <br />  x &lt;&lt; pop();  <br />  y &lt;&lt; pop();  <br />  output('vector to enemy:');  <br />  result &lt;&lt; faceDirection(vectorToDirection(x, y));  <br />  _MMU.dalloc('face_enemy');  <br />  return result;  <br /> }  <br /></code></pre><br />It allocates some temporary memory space in `result`, `x`, and `y`, and then uses other functions and expressions provided by the API to generate all the code necessary to locate and turn the hakk toward the opponent. &nbsp;The trade-off of using something like this is speed, because the hakkML generated is quite a bit larger than a programmer could write directly in ML. &nbsp;But it is convenient, and far easier to express. &nbsp;Using faceEnemy() we could write a simpl logic routine that tries to move toward the enemy in the arena:<br /><br /><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> core0 &lt;&lt; true;  <br /> WHILE(core0);  <br />  core0 &lt;&lt; faceEnemy();  <br />  IF(core0);  <br />   moveForward();  <br />   moveForward();  <br />  ENDIF();  <br /> ENDWHILE();  <br /></code></pre><br />These few lines generate a ton of hakkML code on behalf of the programmer. &nbsp;I'm including it below so you can get a sense of the power of how using simple Dart combinators can yield very complex results! &nbsp;Prepare yourselves for a lot of scrolling...<br /><br /><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> name: "finder"  <br /> blocks:  <br />  - core:  <br />  - mem: {name: "__sys0__", loc: [0, 1]}  <br /> code:  <br />  core:  <br />   - set: [core.0, true]  <br />   - lbl: __while_test_0__  <br />   - set: [__sys0__.0, core.0]  <br />   - je: [__sys0__.0, true, __iftrue_2__]  <br />   - goto: __endif_2__  <br />   - lbl: __iftrue_2__  <br />   - find:  <br />   - pop: __sys0__.4  <br />   - set: [__sys0__.2, __sys0__.4]  <br />   - pop: __sys0__.5  <br />   - set: [__sys0__.3, __sys0__.5]  <br />   - out: "enemy location"  <br />   - tvec: [__sys0__.2, __sys0__.3]  <br />   - pop: __sys0__.6  <br />   - set: [__sys0__.2, __sys0__.6]  <br />   - pop: __sys0__.7  <br />   - set: [__sys0__.3, __sys0__.7]  <br />   - out: "vector to enemy:"  <br />   - set: [__sys0__.8, -1]  <br />   - je: [__sys0__.2, 0, __istrue_7__]  <br />   - set: [__sys0__.9, false]  <br />   - goto: __logic_finish_7__  <br />   - lbl: __istrue_7__  <br />   - set: [__sys0__.9, true]  <br />   - lbl: __logic_finish_7__  <br />   - je: [__sys0__.3, -1, __istrue_8__]  <br />   - set: [__sys0__.10, false]  <br />   - goto: __logic_finish_8__  <br />   - lbl: __istrue_8__  <br />   - set: [__sys0__.10, true]  <br />   - lbl: __logic_finish_8__  <br />   - je: [__sys0__.9, true, __istrue_10__]  <br />   - set: [__sys0__.11, false]  <br />   - goto: __and_finish_9__  <br />   - lbl: __istrue_10__  <br />   - je: [__sys0__.10, true, __istrue_11__]  <br />   - set: [__sys0__.11, false]  <br />   - goto: __and_finish_9__  <br />   - lbl: __istrue_11__  <br />   - set: [__sys0__.11, true]  <br />   - lbl: __and_finish_9__  <br />   - je: [__sys0__.11, true, __iftrue_5__]  <br />   - goto: __endif_5__  <br />   - lbl: __iftrue_5__  <br />   - set: [__sys0__.8, 0]  <br />   - lbl: __endif_5__  <br />   - je: [__sys0__.2, 0, __istrue_15__]  <br />   - set: [__sys0__.12, false]  <br />   - goto: __logic_finish_15__  <br />   - lbl: __istrue_15__  <br />   - set: [__sys0__.12, true]  <br />   - lbl: __logic_finish_15__  <br />   - je: [__sys0__.3, 1, __istrue_16__]  <br />   - set: [__sys0__.13, false]  <br />   - goto: __logic_finish_16__  <br />   - lbl: __istrue_16__  <br />   - set: [__sys0__.13, true]  <br />   - lbl: __logic_finish_16__  <br />   - je: [__sys0__.12, true, __istrue_18__]  <br />   - set: [__sys0__.14, false]  <br />   - goto: __and_finish_17__  <br />   - lbl: __istrue_18__  <br />   - je: [__sys0__.13, true, __istrue_19__]  <br />   - set: [__sys0__.14, false]  <br />   - goto: __and_finish_17__  <br />   - lbl: __istrue_19__  <br />   - set: [__sys0__.14, true]  <br />   - lbl: __and_finish_17__  <br />   - je: [__sys0__.14, true, __iftrue_13__]  <br />   - goto: __endif_13__  <br />   - lbl: __iftrue_13__  <br />   - set: [__sys0__.8, 2]  <br />   - lbl: __endif_13__  <br />   - je: [__sys0__.2, 1, __istrue_23__]  <br />   - set: [__sys0__.15, false]  <br />   - goto: __logic_finish_23__  <br />   - lbl: __istrue_23__  <br />   - set: [__sys0__.15, true]  <br />   - lbl: __logic_finish_23__  <br />   - je: [__sys0__.3, 0, __istrue_24__]  <br />   - set: [__sys0__.16, false]  <br />   - goto: __logic_finish_24__  <br />   - lbl: __istrue_24__  <br />   - set: [__sys0__.16, true]  <br />   - lbl: __logic_finish_24__  <br />   - je: [__sys0__.15, true, __istrue_26__]  <br />   - set: [__sys0__.17, false]  <br />   - goto: __and_finish_25__  <br />   - lbl: __istrue_26__  <br />   - je: [__sys0__.16, true, __istrue_27__]  <br />   - set: [__sys0__.17, false]  <br />   - goto: __and_finish_25__  <br />   - lbl: __istrue_27__  <br />   - set: [__sys0__.17, true]  <br />   - lbl: __and_finish_25__  <br />   - je: [__sys0__.17, true, __iftrue_21__]  <br />   - goto: __endif_21__  <br />   - lbl: __iftrue_21__  <br />   - set: [__sys0__.8, 1]  <br />   - lbl: __endif_21__  <br />   - je: [__sys0__.2, -1, __istrue_31__]  <br />   - set: [__sys0__.18, false]  <br />   - goto: __logic_finish_31__  <br />   - lbl: __istrue_31__  <br />   - set: [__sys0__.18, true]  <br />   - lbl: __logic_finish_31__  <br />   - je: [__sys0__.3, 0, __istrue_32__]  <br />   - set: [__sys0__.19, false]  <br />   - goto: __logic_finish_32__  <br />   - lbl: __istrue_32__  <br />   - set: [__sys0__.19, true]  <br />   - lbl: __logic_finish_32__  <br />   - je: [__sys0__.18, true, __istrue_34__]  <br />   - set: [__sys0__.20, false]  <br />   - goto: __and_finish_33__  <br />   - lbl: __istrue_34__  <br />   - je: [__sys0__.19, true, __istrue_35__]  <br />   - set: [__sys0__.20, false]  <br />   - goto: __and_finish_33__  <br />   - lbl: __istrue_35__  <br />   - set: [__sys0__.20, true]  <br />   - lbl: __and_finish_33__  <br />   - je: [__sys0__.20, true, __iftrue_29__]  <br />   - goto: __endif_29__  <br />   - lbl: __iftrue_29__  <br />   - set: [__sys0__.8, 3]  <br />   - lbl: __endif_29__  <br />   - set: [__sys0__.21, false]  <br />   - hvec:  <br />   - pop: __sys0__.25  <br />   - set: [__sys0__.22, __sys0__.25]  <br />   - pop: __sys0__.26  <br />   - set: [__sys0__.23, __sys0__.26]  <br />   - je: [__sys0__.22, 0, __istrue_39__]  <br />   - set: [__sys0__.27, false]  <br />   - goto: __logic_finish_39__  <br />   - lbl: __istrue_39__  <br />   - set: [__sys0__.27, true]  <br />   - lbl: __logic_finish_39__  <br />   - je: [__sys0__.23, -1, __istrue_40__]  <br />   - set: [__sys0__.28, false]  <br />   - goto: __logic_finish_40__  <br />   - lbl: __istrue_40__  <br />   - set: [__sys0__.28, true]  <br />   - lbl: __logic_finish_40__  <br />   - je: [__sys0__.27, true, __istrue_42__]  <br />   - set: [__sys0__.29, false]  <br />   - goto: __and_finish_41__  <br />   - lbl: __istrue_42__  <br />   - je: [__sys0__.28, true, __istrue_43__]  <br />   - set: [__sys0__.29, false]  <br />   - goto: __and_finish_41__  <br />   - lbl: __istrue_43__  <br />   - set: [__sys0__.29, true]  <br />   - lbl: __and_finish_41__  <br />   - je: [__sys0__.29, true, __iftrue_37__]  <br />   - goto: __endif_37__  <br />   - lbl: __iftrue_37__  <br />   - set: [__sys0__.24, 0]  <br />   - lbl: __endif_37__  <br />   - je: [__sys0__.22, 0, __istrue_47__]  <br />   - set: [__sys0__.30, false]  <br />   - goto: __logic_finish_47__  <br />   - lbl: __istrue_47__  <br />   - set: [__sys0__.30, true]  <br />   - lbl: __logic_finish_47__  <br />   - je: [__sys0__.23, 1, __istrue_48__]  <br />   - set: [__sys0__.31, false]  <br />   - goto: __logic_finish_48__  <br />   - lbl: __istrue_48__  <br />   - set: [__sys0__.31, true]  <br />   - lbl: __logic_finish_48__  <br />   - je: [__sys0__.30, true, __istrue_50__]  <br />   - set: [__sys0__.32, false]  <br />   - goto: __and_finish_49__  <br />   - lbl: __istrue_50__  <br />   - je: [__sys0__.31, true, __istrue_51__]  <br />   - set: [__sys0__.32, false]  <br />   - goto: __and_finish_49__  <br />   - lbl: __istrue_51__  <br />   - set: [__sys0__.32, true]  <br />   - lbl: __and_finish_49__  <br />   - je: [__sys0__.32, true, __iftrue_45__]  <br />   - goto: __endif_45__  <br />   - lbl: __iftrue_45__  <br />   - set: [__sys0__.24, 2]  <br />   - lbl: __endif_45__  <br />   - je: [__sys0__.22, 1, __istrue_55__]  <br />   - set: [__sys0__.33, false]  <br />   - goto: __logic_finish_55__  <br />   - lbl: __istrue_55__  <br />   - set: [__sys0__.33, true]  <br />   - lbl: __logic_finish_55__  <br />   - je: [__sys0__.23, 0, __istrue_56__]  <br />   - set: [__sys0__.34, false]  <br />   - goto: __logic_finish_56__  <br />   - lbl: __istrue_56__  <br />   - set: [__sys0__.34, true]  <br />   - lbl: __logic_finish_56__  <br />   - je: [__sys0__.33, true, __istrue_58__]  <br />   - set: [__sys0__.35, false]  <br />   - goto: __and_finish_57__  <br />   - lbl: __istrue_58__  <br />   - je: [__sys0__.34, true, __istrue_59__]  <br />   - set: [__sys0__.35, false]  <br />   - goto: __and_finish_57__  <br />   - lbl: __istrue_59__  <br />   - set: [__sys0__.35, true]  <br />   - lbl: __and_finish_57__  <br />   - je: [__sys0__.35, true, __iftrue_53__]  <br />   - goto: __endif_53__  <br />   - lbl: __iftrue_53__  <br />   - set: [__sys0__.24, 1]  <br />   - lbl: __endif_53__  <br />   - je: [__sys0__.22, -1, __istrue_63__]  <br />   - set: [__sys0__.36, false]  <br />   - goto: __logic_finish_63__  <br />   - lbl: __istrue_63__  <br />   - set: [__sys0__.36, true]  <br />   - lbl: __logic_finish_63__  <br />   - je: [__sys0__.23, 0, __istrue_64__]  <br />   - set: [__sys0__.37, false]  <br />   - goto: __logic_finish_64__  <br />   - lbl: __istrue_64__  <br />   - set: [__sys0__.37, true]  <br />   - lbl: __logic_finish_64__  <br />   - je: [__sys0__.36, true, __istrue_66__]  <br />   - set: [__sys0__.38, false]  <br />   - goto: __and_finish_65__  <br />   - lbl: __istrue_66__  <br />   - je: [__sys0__.37, true, __istrue_67__]  <br />   - set: [__sys0__.38, false]  <br />   - goto: __and_finish_65__  <br />   - lbl: __istrue_67__  <br />   - set: [__sys0__.38, true]  <br />   - lbl: __and_finish_65__  <br />   - je: [__sys0__.38, true, __iftrue_61__]  <br />   - goto: __endif_61__  <br />   - lbl: __iftrue_61__  <br />   - set: [__sys0__.24, 3]  <br />   - lbl: __endif_61__  <br />   - set: [__sys0__.8, __sys0__.24]  <br />   - je: [__sys0__.8, 0, __istrue_72__]  <br />   - set: [__sys0__.22, false]  <br />   - goto: __logic_finish_72__  <br />   - lbl: __istrue_72__  <br />   - set: [__sys0__.22, true]  <br />   - lbl: __logic_finish_72__  <br />   - je: [__sys0__.22, true, __iftrue_70__]  <br />   - goto: __endif_70__  <br />   - lbl: __iftrue_70__  <br />   - je: [__sys0__.8, 2, __istrue_76__]  <br />   - set: [__sys0__.24, false]  <br />   - goto: __logic_finish_76__  <br />   - lbl: __istrue_76__  <br />   - set: [__sys0__.24, true]  <br />   - lbl: __logic_finish_76__  <br />   - je: [__sys0__.24, true, __iftrue_74__]  <br />   - goto: __endif_74__  <br />   - lbl: __iftrue_74__  <br />   - turn: [__sys0__.40, 1]  <br />   - set: [__sys0__.21, __sys0__.40]  <br />   - turn: [__sys0__.41, 1]  <br />   - set: [__sys0__.21, __sys0__.41]  <br />   - lbl: __endif_74__  <br />   - je: [__sys0__.8, 1, __istrue_80__]  <br />   - set: [__sys0__.39, false]  <br />   - goto: __logic_finish_80__  <br />   - lbl: __istrue_80__  <br />   - set: [__sys0__.39, true]  <br />   - lbl: __logic_finish_80__  <br />   - je: [__sys0__.39, true, __iftrue_78__]  <br />   - goto: __endif_78__  <br />   - lbl: __iftrue_78__  <br />   - turn: [__sys0__.41, 0]  <br />   - set: [__sys0__.21, __sys0__.41]  <br />   - lbl: __endif_78__  <br />   - je: [__sys0__.8, 3, __istrue_84__]  <br />   - set: [__sys0__.40, false]  <br />   - goto: __logic_finish_84__  <br />   - lbl: __istrue_84__  <br />   - set: [__sys0__.40, true]  <br />   - lbl: __logic_finish_84__  <br />   - je: [__sys0__.40, true, __iftrue_82__]  <br />   - goto: __endif_82__  <br />   - lbl: __iftrue_82__  <br />   - turn: [__sys0__.42, 1]  <br />   - set: [__sys0__.21, __sys0__.42]  <br />   - lbl: __endif_82__  <br />   - goto: __end_turn_to_69__  <br />   - lbl: __endif_70__  <br />   - je: [__sys0__.8, 1, __istrue_88__]  <br />   - set: [__sys0__.23, false]  <br />   - goto: __logic_finish_88__  <br />   - lbl: __istrue_88__  <br />   - set: [__sys0__.23, true]  <br />   - lbl: __logic_finish_88__  <br />   - je: [__sys0__.23, true, __iftrue_86__]  <br />   - goto: __endif_86__  <br />   - lbl: __iftrue_86__  <br />   - je: [__sys0__.8, 0, __istrue_92__]  <br />   - set: [__sys0__.39, false]  <br />   - goto: __logic_finish_92__  <br />   - lbl: __istrue_92__  <br />   - set: [__sys0__.39, true]  <br />   - lbl: __logic_finish_92__  <br />   - je: [__sys0__.39, true, __iftrue_90__]  <br />   - goto: __endif_90__  <br />   - lbl: __iftrue_90__  <br />   - turn: [__sys0__.41, 1]  <br />   - set: [__sys0__.21, __sys0__.41]  <br />   - lbl: __endif_90__  <br />   - je: [__sys0__.8, 2, __istrue_96__]  <br />   - set: [__sys0__.40, false]  <br />   - goto: __logic_finish_96__  <br />   - lbl: __istrue_96__  <br />   - set: [__sys0__.40, true]  <br />   - lbl: __logic_finish_96__  <br />   - je: [__sys0__.40, true, __iftrue_94__]  <br />   - goto: __endif_94__  <br />   - lbl: __iftrue_94__  <br />   - turn: [__sys0__.42, 0]  <br />   - set: [__sys0__.21, __sys0__.42]  <br />   - lbl: __endif_94__  <br />   - je: [__sys0__.8, 3, __istrue_100__]  <br />   - set: [__sys0__.41, false]  <br />   - goto: __logic_finish_100__  <br />   - lbl: __istrue_100__  <br />   - set: [__sys0__.41, true]  <br />   - lbl: __logic_finish_100__  <br />   - je: [__sys0__.41, true, __iftrue_98__]  <br />   - goto: __endif_98__  <br />   - lbl: __iftrue_98__  <br />   - turn: [__sys0__.43, 1]  <br />   - set: [__sys0__.21, __sys0__.43]  <br />   - turn: [__sys0__.44, 1]  <br />   - set: [__sys0__.21, __sys0__.44]  <br />   - lbl: __endif_98__  <br />   - goto: __end_turn_to_69__  <br />   - lbl: __endif_86__  <br />   - je: [__sys0__.8, 2, __istrue_104__]  <br />   - set: [__sys0__.24, false]  <br />   - goto: __logic_finish_104__  <br />   - lbl: __istrue_104__  <br />   - set: [__sys0__.24, true]  <br />   - lbl: __logic_finish_104__  <br />   - je: [__sys0__.24, true, __iftrue_102__]  <br />   - goto: __endif_102__  <br />   - lbl: __iftrue_102__  <br />   - je: [__sys0__.8, 0, __istrue_108__]  <br />   - set: [__sys0__.40, false]  <br />   - goto: __logic_finish_108__  <br />   - lbl: __istrue_108__  <br />   - set: [__sys0__.40, true]  <br />   - lbl: __logic_finish_108__  <br />   - je: [__sys0__.40, true, __iftrue_106__]  <br />   - goto: __endif_106__  <br />   - lbl: __iftrue_106__  <br />   - turn: [__sys0__.42, 1]  <br />   - set: [__sys0__.21, __sys0__.42]  <br />   - turn: [__sys0__.43, 1]  <br />   - set: [__sys0__.21, __sys0__.43]  <br />   - lbl: __endif_106__  <br />   - je: [__sys0__.8, 1, __istrue_112__]  <br />   - set: [__sys0__.41, false]  <br />   - goto: __logic_finish_112__  <br />   - lbl: __istrue_112__  <br />   - set: [__sys0__.41, true]  <br />   - lbl: __logic_finish_112__  <br />   - je: [__sys0__.41, true, __iftrue_110__]  <br />   - goto: __endif_110__  <br />   - lbl: __iftrue_110__  <br />   - turn: [__sys0__.43, 1]  <br />   - set: [__sys0__.21, __sys0__.43]  <br />   - lbl: __endif_110__  <br />   - je: [__sys0__.8, 3, __istrue_116__]  <br />   - set: [__sys0__.42, false]  <br />   - goto: __logic_finish_116__  <br />   - lbl: __istrue_116__  <br />   - set: [__sys0__.42, true]  <br />   - lbl: __logic_finish_116__  <br />   - je: [__sys0__.42, true, __iftrue_114__]  <br />   - goto: __endif_114__  <br />   - lbl: __iftrue_114__  <br />   - turn: [__sys0__.44, 0]  <br />   - set: [__sys0__.21, __sys0__.44]  <br />   - lbl: __endif_114__  <br />   - goto: __end_turn_to_69__  <br />   - lbl: __endif_102__  <br />   - je: [__sys0__.8, 3, __istrue_120__]  <br />   - set: [__sys0__.39, false]  <br />   - goto: __logic_finish_120__  <br />   - lbl: __istrue_120__  <br />   - set: [__sys0__.39, true]  <br />   - lbl: __logic_finish_120__  <br />   - je: [__sys0__.39, true, __iftrue_118__]  <br />   - goto: __endif_118__  <br />   - lbl: __iftrue_118__  <br />   - je: [__sys0__.8, 0, __istrue_124__]  <br />   - set: [__sys0__.41, false]  <br />   - goto: __logic_finish_124__  <br />   - lbl: __istrue_124__  <br />   - set: [__sys0__.41, true]  <br />   - lbl: __logic_finish_124__  <br />   - je: [__sys0__.41, true, __iftrue_122__]  <br />   - goto: __endif_122__  <br />   - lbl: __iftrue_122__  <br />   - turn: [__sys0__.43, 0]  <br />   - set: [__sys0__.21, __sys0__.43]  <br />   - lbl: __endif_122__  <br />   - je: [__sys0__.8, 1, __istrue_128__]  <br />   - set: [__sys0__.42, false]  <br />   - goto: __logic_finish_128__  <br />   - lbl: __istrue_128__  <br />   - set: [__sys0__.42, true]  <br />   - lbl: __logic_finish_128__  <br />   - je: [__sys0__.42, true, __iftrue_126__]  <br />   - goto: __endif_126__  <br />   - lbl: __iftrue_126__  <br />   - turn: [__sys0__.44, 0]  <br />   - set: [__sys0__.21, __sys0__.44]  <br />   - turn: [__sys0__.45, 0]  <br />   - set: [__sys0__.21, __sys0__.45]  <br />   - lbl: __endif_126__  <br />   - je: [__sys0__.8, 2, __istrue_132__]  <br />   - set: [__sys0__.43, false]  <br />   - goto: __logic_finish_132__  <br />   - lbl: __istrue_132__  <br />   - set: [__sys0__.43, true]  <br />   - lbl: __logic_finish_132__  <br />   - je: [__sys0__.43, true, __iftrue_130__]  <br />   - goto: __endif_130__  <br />   - lbl: __iftrue_130__  <br />   - turn: [__sys0__.45, 1]  <br />   - set: [__sys0__.21, __sys0__.45]  <br />   - lbl: __endif_130__  <br />   - lbl: __endif_118__  <br />   - lbl: __end_turn_to_69__  <br />   - set: [__sys0__.1, __sys0__.21]  <br />   - set: [core.0, __sys0__.1]  <br />   - set: [__sys0__.1, core.0]  <br />   - je: [__sys0__.1, true, __iftrue_134__]  <br />   - goto: __endif_134__  <br />   - lbl: __iftrue_134__  <br />   - lbl: __endif_134__  <br />   - goto: __while_test_0__  <br />   - lbl: __endif_2__  <br />   - find:  <br />   - movef: __sys0__.2  <br />   - movef: __sys0__.3  <br />   - pop: __sys0__.3  <br />   - set: [__sys0__.1, __sys0__.3]  <br />   - pop: __sys0__.3  <br />   - set: [__sys0__.2, __sys0__.3]  <br />   - out: "enemy location"  <br />   - tvec: [__sys0__.1, __sys0__.2]  <br />   - pop: __sys0__.3  <br />   - set: [__sys0__.1, __sys0__.3]  <br />   - pop: __sys0__.3  <br />   - set: [__sys0__.2, __sys0__.3]  <br />   - out: "vector to enemy:"  <br />   - set: [__sys0__.3, -1]  <br />   - je: [__sys0__.1, 0, __istrue_139__]  <br />   - set: [__sys0__.4, false]  <br />   - goto: __logic_finish_139__  <br />   - lbl: __istrue_139__  <br />   - set: [__sys0__.4, true]  <br />   - lbl: __logic_finish_139__  <br />   - je: [__sys0__.2, -1, __istrue_140__]  <br />   - set: [__sys0__.5, false]  <br />   - goto: __logic_finish_140__  <br />   - lbl: __istrue_140__  <br />   - set: [__sys0__.5, true]  <br />   - lbl: __logic_finish_140__  <br />   - je: [__sys0__.4, true, __istrue_142__]  <br />   - set: [__sys0__.6, false]  <br />   - goto: __and_finish_141__  <br />   - lbl: __istrue_142__  <br />   - je: [__sys0__.5, true, __istrue_143__]  <br />   - set: [__sys0__.6, false]  <br />   - goto: __and_finish_141__  <br />   - lbl: __istrue_143__  <br />   - set: [__sys0__.6, true]  <br />   - lbl: __and_finish_141__  <br />   - je: [__sys0__.6, true, __iftrue_137__]  <br />   - goto: __endif_137__  <br />   - lbl: __iftrue_137__  <br />   - set: [__sys0__.3, 0]  <br />   - lbl: __endif_137__  <br />   - je: [__sys0__.1, 0, __istrue_147__]  <br />   - set: [__sys0__.4, false]  <br />   - goto: __logic_finish_147__  <br />   - lbl: __istrue_147__  <br />   - set: [__sys0__.4, true]  <br />   - lbl: __logic_finish_147__  <br />   - je: [__sys0__.2, 1, __istrue_148__]  <br />   - set: [__sys0__.5, false]  <br />   - goto: __logic_finish_148__  <br />   - lbl: __istrue_148__  <br />   - set: [__sys0__.5, true]  <br />   - lbl: __logic_finish_148__  <br />   - je: [__sys0__.4, true, __istrue_150__]  <br />   - set: [__sys0__.6, false]  <br />   - goto: __and_finish_149__  <br />   - lbl: __istrue_150__  <br />   - je: [__sys0__.5, true, __istrue_151__]  <br />   - set: [__sys0__.6, false]  <br />   - goto: __and_finish_149__  <br />   - lbl: __istrue_151__  <br />   - set: [__sys0__.6, true]  <br />   - lbl: __and_finish_149__  <br />   - je: [__sys0__.6, true, __iftrue_145__]  <br />   - goto: __endif_145__  <br />   - lbl: __iftrue_145__  <br />   - set: [__sys0__.3, 2]  <br />   - lbl: __endif_145__  <br />   - je: [__sys0__.1, 1, __istrue_155__]  <br />   - set: [__sys0__.4, false]  <br />   - goto: __logic_finish_155__  <br />   - lbl: __istrue_155__  <br />   - set: [__sys0__.4, true]  <br />   - lbl: __logic_finish_155__  <br />   - je: [__sys0__.2, 0, __istrue_156__]  <br />   - set: [__sys0__.5, false]  <br />   - goto: __logic_finish_156__  <br />   - lbl: __istrue_156__  <br />   - set: [__sys0__.5, true]  <br />   - lbl: __logic_finish_156__  <br />   - je: [__sys0__.4, true, __istrue_158__]  <br />   - set: [__sys0__.6, false]  <br />   - goto: __and_finish_157__  <br />   - lbl: __istrue_158__  <br />   - je: [__sys0__.5, true, __istrue_159__]  <br />   - set: [__sys0__.6, false]  <br />   - goto: __and_finish_157__  <br />   - lbl: __istrue_159__  <br />   - set: [__sys0__.6, true]  <br />   - lbl: __and_finish_157__  <br />   - je: [__sys0__.6, true, __iftrue_153__]  <br />   - goto: __endif_153__  <br />   - lbl: __iftrue_153__  <br />   - set: [__sys0__.3, 1]  <br />   - lbl: __endif_153__  <br />   - je: [__sys0__.1, -1, __istrue_163__]  <br />   - set: [__sys0__.4, false]  <br />   - goto: __logic_finish_163__  <br />   - lbl: __istrue_163__  <br />   - set: [__sys0__.4, true]  <br />   - lbl: __logic_finish_163__  <br />   - je: [__sys0__.2, 0, __istrue_164__]  <br />   - set: [__sys0__.5, false]  <br />   - goto: __logic_finish_164__  <br />   - lbl: __istrue_164__  <br />   - set: [__sys0__.5, true]  <br />   - lbl: __logic_finish_164__  <br />   - je: [__sys0__.4, true, __istrue_166__]  <br />   - set: [__sys0__.6, false]  <br />   - goto: __and_finish_165__  <br />   - lbl: __istrue_166__  <br />   - je: [__sys0__.5, true, __istrue_167__]  <br />   - set: [__sys0__.6, false]  <br />   - goto: __and_finish_165__  <br />   - lbl: __istrue_167__  <br />   - set: [__sys0__.6, true]  <br />   - lbl: __and_finish_165__  <br />   - je: [__sys0__.6, true, __iftrue_161__]  <br />   - goto: __endif_161__  <br />   - lbl: __iftrue_161__  <br />   - set: [__sys0__.3, 3]  <br />   - lbl: __endif_161__  <br />   - set: [__sys0__.4, false]  <br />   - hvec:  <br />   - pop: __sys0__.8  <br />   - set: [__sys0__.5, __sys0__.8]  <br />   - pop: __sys0__.8  <br />   - set: [__sys0__.6, __sys0__.8]  <br />   - je: [__sys0__.5, 0, __istrue_171__]  <br />   - set: [__sys0__.8, false]  <br />   - goto: __logic_finish_171__  <br />   - lbl: __istrue_171__  <br />   - set: [__sys0__.8, true]  <br />   - lbl: __logic_finish_171__  <br />   - je: [__sys0__.6, -1, __istrue_172__]  <br />   - set: [__sys0__.9, false]  <br />   - goto: __logic_finish_172__  <br />   - lbl: __istrue_172__  <br />   - set: [__sys0__.9, true]  <br />   - lbl: __logic_finish_172__  <br />   - je: [__sys0__.8, true, __istrue_174__]  <br />   - set: [__sys0__.10, false]  <br />   - goto: __and_finish_173__  <br />   - lbl: __istrue_174__  <br />   - je: [__sys0__.9, true, __istrue_175__]  <br />   - set: [__sys0__.10, false]  <br />   - goto: __and_finish_173__  <br />   - lbl: __istrue_175__  <br />   - set: [__sys0__.10, true]  <br />   - lbl: __and_finish_173__  <br />   - je: [__sys0__.10, true, __iftrue_169__]  <br />   - goto: __endif_169__  <br />   - lbl: __iftrue_169__  <br />   - set: [__sys0__.7, 0]  <br />   - lbl: __endif_169__  <br />   - je: [__sys0__.5, 0, __istrue_179__]  <br />   - set: [__sys0__.8, false]  <br />   - goto: __logic_finish_179__  <br />   - lbl: __istrue_179__  <br />   - set: [__sys0__.8, true]  <br />   - lbl: __logic_finish_179__  <br />   - je: [__sys0__.6, 1, __istrue_180__]  <br />   - set: [__sys0__.9, false]  <br />   - goto: __logic_finish_180__  <br />   - lbl: __istrue_180__  <br />   - set: [__sys0__.9, true]  <br />   - lbl: __logic_finish_180__  <br />   - je: [__sys0__.8, true, __istrue_182__]  <br />   - set: [__sys0__.10, false]  <br />   - goto: __and_finish_181__  <br />   - lbl: __istrue_182__  <br />   - je: [__sys0__.9, true, __istrue_183__]  <br />   - set: [__sys0__.10, false]  <br />   - goto: __and_finish_181__  <br />   - lbl: __istrue_183__  <br />   - set: [__sys0__.10, true]  <br />   - lbl: __and_finish_181__  <br />   - je: [__sys0__.10, true, __iftrue_177__]  <br />   - goto: __endif_177__  <br />   - lbl: __iftrue_177__  <br />   - set: [__sys0__.7, 2]  <br />   - lbl: __endif_177__  <br />   - je: [__sys0__.5, 1, __istrue_187__]  <br />   - set: [__sys0__.8, false]  <br />   - goto: __logic_finish_187__  <br />   - lbl: __istrue_187__  <br />   - set: [__sys0__.8, true]  <br />   - lbl: __logic_finish_187__  <br />   - je: [__sys0__.6, 0, __istrue_188__]  <br />   - set: [__sys0__.9, false]  <br />   - goto: __logic_finish_188__  <br />   - lbl: __istrue_188__  <br />   - set: [__sys0__.9, true]  <br />   - lbl: __logic_finish_188__  <br />   - je: [__sys0__.8, true, __istrue_190__]  <br />   - set: [__sys0__.10, false]  <br />   - goto: __and_finish_189__  <br />   - lbl: __istrue_190__  <br />   - je: [__sys0__.9, true, __istrue_191__]  <br />   - set: [__sys0__.10, false]  <br />   - goto: __and_finish_189__  <br />   - lbl: __istrue_191__  <br />   - set: [__sys0__.10, true]  <br />   - lbl: __and_finish_189__  <br />   - je: [__sys0__.10, true, __iftrue_185__]  <br />   - goto: __endif_185__  <br />   - lbl: __iftrue_185__  <br />   - set: [__sys0__.7, 1]  <br />   - lbl: __endif_185__  <br />   - je: [__sys0__.5, -1, __istrue_195__]  <br />   - set: [__sys0__.8, false]  <br />   - goto: __logic_finish_195__  <br />   - lbl: __istrue_195__  <br />   - set: [__sys0__.8, true]  <br />   - lbl: __logic_finish_195__  <br />   - je: [__sys0__.6, 0, __istrue_196__]  <br />   - set: [__sys0__.9, false]  <br />   - goto: __logic_finish_196__  <br />   - lbl: __istrue_196__  <br />   - set: [__sys0__.9, true]  <br />   - lbl: __logic_finish_196__  <br />   - je: [__sys0__.8, true, __istrue_198__]  <br />   - set: [__sys0__.10, false]  <br />   - goto: __and_finish_197__  <br />   - lbl: __istrue_198__  <br />   - je: [__sys0__.9, true, __istrue_199__]  <br />   - set: [__sys0__.10, false]  <br />   - goto: __and_finish_197__  <br />   - lbl: __istrue_199__  <br />   - set: [__sys0__.10, true]  <br />   - lbl: __and_finish_197__  <br />   - je: [__sys0__.10, true, __iftrue_193__]  <br />   - goto: __endif_193__  <br />   - lbl: __iftrue_193__  <br />   - set: [__sys0__.7, 3]  <br />   - lbl: __endif_193__  <br />   - set: [__sys0__.3, __sys0__.7]  <br />   - je: [__sys0__.3, 0, __istrue_204__]  <br />   - set: [__sys0__.5, false]  <br />   - goto: __logic_finish_204__  <br />   - lbl: __istrue_204__  <br />   - set: [__sys0__.5, true]  <br />   - lbl: __logic_finish_204__  <br />   - je: [__sys0__.5, true, __iftrue_202__]  <br />   - goto: __endif_202__  <br />   - lbl: __iftrue_202__  <br />   - je: [__sys0__.3, 2, __istrue_208__]  <br />   - set: [__sys0__.7, false]  <br />   - goto: __logic_finish_208__  <br />   - lbl: __istrue_208__  <br />   - set: [__sys0__.7, true]  <br />   - lbl: __logic_finish_208__  <br />   - je: [__sys0__.7, true, __iftrue_206__]  <br />   - goto: __endif_206__  <br />   - lbl: __iftrue_206__  <br />   - turn: [__sys0__.9, 1]  <br />   - set: [__sys0__.4, __sys0__.9]  <br />   - turn: [__sys0__.10, 1]  <br />   - set: [__sys0__.4, __sys0__.10]  <br />   - lbl: __endif_206__  <br />   - je: [__sys0__.3, 1, __istrue_212__]  <br />   - set: [__sys0__.8, false]  <br />   - goto: __logic_finish_212__  <br />   - lbl: __istrue_212__  <br />   - set: [__sys0__.8, true]  <br />   - lbl: __logic_finish_212__  <br />   - je: [__sys0__.8, true, __iftrue_210__]  <br />   - goto: __endif_210__  <br />   - lbl: __iftrue_210__  <br />   - turn: [__sys0__.10, 0]  <br />   - set: [__sys0__.4, __sys0__.10]  <br />   - lbl: __endif_210__  <br />   - je: [__sys0__.3, 3, __istrue_216__]  <br />   - set: [__sys0__.9, false]  <br />   - goto: __logic_finish_216__  <br />   - lbl: __istrue_216__  <br />   - set: [__sys0__.9, true]  <br />   - lbl: __logic_finish_216__  <br />   - je: [__sys0__.9, true, __iftrue_214__]  <br />   - goto: __endif_214__  <br />   - lbl: __iftrue_214__  <br />   - turn: [__sys0__.11, 1]  <br />   - set: [__sys0__.4, __sys0__.11]  <br />   - lbl: __endif_214__  <br />   - goto: __end_turn_to_201__  <br />   - lbl: __endif_202__  <br />   - je: [__sys0__.3, 1, __istrue_220__]  <br />   - set: [__sys0__.5, false]  <br />   - goto: __logic_finish_220__  <br />   - lbl: __istrue_220__  <br />   - set: [__sys0__.5, true]  <br />   - lbl: __logic_finish_220__  <br />   - je: [__sys0__.5, true, __iftrue_218__]  <br />   - goto: __endif_218__  <br />   - lbl: __iftrue_218__  <br />   - je: [__sys0__.3, 0, __istrue_224__]  <br />   - set: [__sys0__.7, false]  <br />   - goto: __logic_finish_224__  <br />   - lbl: __istrue_224__  <br />   - set: [__sys0__.7, true]  <br />   - lbl: __logic_finish_224__  <br />   - je: [__sys0__.7, true, __iftrue_222__]  <br />   - goto: __endif_222__  <br />   - lbl: __iftrue_222__  <br />   - turn: [__sys0__.9, 1]  <br />   - set: [__sys0__.4, __sys0__.9]  <br />   - lbl: __endif_222__  <br />   - je: [__sys0__.3, 2, __istrue_228__]  <br />   - set: [__sys0__.8, false]  <br />   - goto: __logic_finish_228__  <br />   - lbl: __istrue_228__  <br />   - set: [__sys0__.8, true]  <br />   - lbl: __logic_finish_228__  <br />   - je: [__sys0__.8, true, __iftrue_226__]  <br />   - goto: __endif_226__  <br />   - lbl: __iftrue_226__  <br />   - turn: [__sys0__.10, 0]  <br />   - set: [__sys0__.4, __sys0__.10]  <br />   - lbl: __endif_226__  <br />   - je: [__sys0__.3, 3, __istrue_232__]  <br />   - set: [__sys0__.9, false]  <br />   - goto: __logic_finish_232__  <br />   - lbl: __istrue_232__  <br />   - set: [__sys0__.9, true]  <br />   - lbl: __logic_finish_232__  <br />   - je: [__sys0__.9, true, __iftrue_230__]  <br />   - goto: __endif_230__  <br />   - lbl: __iftrue_230__  <br />   - turn: [__sys0__.11, 1]  <br />   - set: [__sys0__.4, __sys0__.11]  <br />   - turn: [__sys0__.12, 1]  <br />   - set: [__sys0__.4, __sys0__.12]  <br />   - lbl: __endif_230__  <br />   - goto: __end_turn_to_201__  <br />   - lbl: __endif_218__  <br />   - je: [__sys0__.3, 2, __istrue_236__]  <br />   - set: [__sys0__.5, false]  <br />   - goto: __logic_finish_236__  <br />   - lbl: __istrue_236__  <br />   - set: [__sys0__.5, true]  <br />   - lbl: __logic_finish_236__  <br />   - je: [__sys0__.5, true, __iftrue_234__]  <br />   - goto: __endif_234__  <br />   - lbl: __iftrue_234__  <br />   - je: [__sys0__.3, 0, __istrue_240__]  <br />   - set: [__sys0__.7, false]  <br />   - goto: __logic_finish_240__  <br />   - lbl: __istrue_240__  <br />   - set: [__sys0__.7, true]  <br />   - lbl: __logic_finish_240__  <br />   - je: [__sys0__.7, true, __iftrue_238__]  <br />   - goto: __endif_238__  <br />   - lbl: __iftrue_238__  <br />   - turn: [__sys0__.9, 1]  <br />   - set: [__sys0__.4, __sys0__.9]  <br />   - turn: [__sys0__.10, 1]  <br />   - set: [__sys0__.4, __sys0__.10]  <br />   - lbl: __endif_238__  <br />   - je: [__sys0__.3, 1, __istrue_244__]  <br />   - set: [__sys0__.8, false]  <br />   - goto: __logic_finish_244__  <br />   - lbl: __istrue_244__  <br />   - set: [__sys0__.8, true]  <br />   - lbl: __logic_finish_244__  <br />   - je: [__sys0__.8, true, __iftrue_242__]  <br />   - goto: __endif_242__  <br />   - lbl: __iftrue_242__  <br />   - turn: [__sys0__.10, 1]  <br />   - set: [__sys0__.4, __sys0__.10]  <br />   - lbl: __endif_242__  <br />   - je: [__sys0__.3, 3, __istrue_248__]  <br />   - set: [__sys0__.9, false]  <br />   - goto: __logic_finish_248__  <br />   - lbl: __istrue_248__  <br />   - set: [__sys0__.9, true]  <br />   - lbl: __logic_finish_248__  <br />   - je: [__sys0__.9, true, __iftrue_246__]  <br />   - goto: __endif_246__  <br />   - lbl: __iftrue_246__  <br />   - turn: [__sys0__.11, 0]  <br />   - set: [__sys0__.4, __sys0__.11]  <br />   - lbl: __endif_246__  <br />   - goto: __end_turn_to_201__  <br />   - lbl: __endif_234__  <br />   - je: [__sys0__.3, 3, __istrue_252__]  <br />   - set: [__sys0__.5, false]  <br />   - goto: __logic_finish_252__  <br />   - lbl: __istrue_252__  <br />   - set: [__sys0__.5, true]  <br />   - lbl: __logic_finish_252__  <br />   - je: [__sys0__.5, true, __iftrue_250__]  <br />   - goto: __endif_250__  <br />   - lbl: __iftrue_250__  <br />   - je: [__sys0__.3, 0, __istrue_256__]  <br />   - set: [__sys0__.7, false]  <br />   - goto: __logic_finish_256__  <br />   - lbl: __istrue_256__  <br />   - set: [__sys0__.7, true]  <br />   - lbl: __logic_finish_256__  <br />   - je: [__sys0__.7, true, __iftrue_254__]  <br />   - goto: __endif_254__  <br />   - lbl: __iftrue_254__  <br />   - turn: [__sys0__.9, 0]  <br />   - set: [__sys0__.4, __sys0__.9]  <br />   - lbl: __endif_254__  <br />   - je: [__sys0__.3, 1, __istrue_260__]  <br />   - set: [__sys0__.8, false]  <br />   - goto: __logic_finish_260__  <br />   - lbl: __istrue_260__  <br />   - set: [__sys0__.8, true]  <br />   - lbl: __logic_finish_260__  <br />   - je: [__sys0__.8, true, __iftrue_258__]  <br />   - goto: __endif_258__  <br />   - lbl: __iftrue_258__  <br />   - turn: [__sys0__.10, 0]  <br />   - set: [__sys0__.4, __sys0__.10]  <br />   - turn: [__sys0__.11, 0]  <br />   - set: [__sys0__.4, __sys0__.11]  <br />   - lbl: __endif_258__  <br />   - je: [__sys0__.3, 2, __istrue_264__]  <br />   - set: [__sys0__.9, false]  <br />   - goto: __logic_finish_264__  <br />   - lbl: __istrue_264__  <br />   - set: [__sys0__.9, true]  <br />   - lbl: __logic_finish_264__  <br />   - je: [__sys0__.9, true, __iftrue_262__]  <br />   - goto: __endif_262__  <br />   - lbl: __iftrue_262__  <br />   - turn: [__sys0__.11, 1]  <br />   - set: [__sys0__.4, __sys0__.11]  <br />   - lbl: __endif_262__  <br />   - lbl: __endif_250__  <br />   - lbl: __end_turn_to_201__  <br />   - set: [__sys0__.0, __sys0__.4]  <br />   - set: [core.0, __sys0__.0]  <br /></code></pre><br />Whew! You made it!<br /><h2><span style="font-size: large;">Conclusion</span></h2>Using Dart to create an expressive embedded "DSL" API is entirely possible. &nbsp;Operator overrides provide a gateway to building powerful expression combinators. &nbsp;Keeping the API embedded in Dart allows developers to take advantage of Dart's existing tooling ecosystem. &nbsp;For my project, using Dart allowed me to build an API that provides an easier entry point for potential gamers.<br /><br />If you want to check out the library for yourself, you can import the <a href="https://pub.dartlang.org/packages/hakk_builder" target="_blank">hakk builder library into your own Dart project here</a>. &nbsp;It's pretty well documented, though not fully yet. &nbsp;There are 3 libraries to choose from on import. &nbsp;Chose the basic library with:<br /><br /><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> import 'package:hakk_builder/basic.dart';  <br /></code></pre><br />The builder is not yet on github, but you can also download the source code from pub if you wish.<br /><br /><br />
