---
title: 'Bug Potpourri As the New Dart Approaches'
layout: post
published: '2014-05-14T23:59:00-04:00'
feed: 'japh(r) by Chris Strom'
link: 'http://feedproxy.google.com/~r/JaphrByChrisStrom/~3/jmcnNQdZU14/bug-potpourri-as-new-dart-approaches.html'
author:
    name: 'Chris Strom'
    email: noreply@blogger.com
    url: 'https://plus.google.com/117928918793969810642'
tags:
    - chain
    - dart
    - dartlang
    - polymer
    - testing

---

<div class=top-chain-links></div><br />Tonight, I hope to verify some bugs fixes to the <a href="http://dartlang.org">Dart</a> language. Judging on the amount of activity occurring on a number of issue reports, it would seem that the Dart team is focusing on the imminent 1.4 (as well as deciding what comes next). So it seems only right that I do my part.<br /><br />Besides, my main focus nowadays is updating and refreshing <a href="http://dart4hipsters.com/">Dart for Hipsters</a>. After the previous nights' work, this mainly consists of writing, not coding, so I need <i>something</i> code-related to blog about, lest I offend the gods my my chain. Trust me, the gods are not to be trifled. <br /><br />First up is a <a href="https://code.google.com/p/dart/issues/detail?id=16194">RangeError</a> bug that I got in <a href="https://www.dartlang.org/polymer-dart/">Polymer.dart</a> code. Cleverly, I filed that bug without any example code. I hate people that do that. Sigh.<br /><br />Anyhow, I claimed in the bug report that it worked with any Polymer code that has a pub transformer. Around the time that I filed that bug, I had been working on my SVG pizza example, which includes a pub transformer in the <code>pubspec.yaml</code>:<pre class=prettyprint>name: svg_example<br />dependencies:<br />  polymer: any<br />dev_dependencies:<br />  unittest: any<br /><b>transformers:<br />- polymer:<br />    entry_points: web/index.html</b></pre>I have not run <code>pub update</code> since that bug report was filed, so this ought to be the same version of the libraries in which I saw the errors back in January:<pre class=prettyprint>➜  dart git:(master) ls -l packages | grep polymer\ <br />lrwxrwxrwx 1 chris chris 64 <b>Jan 18</b> 16:32 polymer -> /home/chris/.pub-cache/hosted/pub.dartlang.org/<b>polymer-0.9.4</b>/lib</pre>So I start <code>pub serve</code>:<pre class=prettyprint>➜  dart git:(master) pub serve<br />Loading observe transformers... (3.8s)<br />Loading polymer transformers... (1.7s)<br />Serving svg_example web  on http://localhost:8080<br />Serving svg_example test on http://localhost:8081<br />Build completed successfully</pre>And fire up Chrome (not <a href="http://www.dartlang.org/dartium/">Dartium</a>, but Chrome-without-a-Dart-VM). And it works fine:<br /><br /><a href="http://1.bp.blogspot.com/-CJdJN_iG_8U/U3Q37UoFv9I/AAAAAAAAZOo/pozKr4iZZB8/s1600/01-worky_pub_js_transformer.png" imageanchor="1" ><img border="0" src="http://1.bp.blogspot.com/-CJdJN_iG_8U/U3Q37UoFv9I/AAAAAAAAZOo/pozKr4iZZB8/s400/01-worky_pub_js_transformer.png" /></a><br /><br />The actual stack traces from that bug report were coming from the <code>shadow_dom.debug.js</code> support library. The network tab confirms that that file is definitely being loaded. I run a <code>pub update</code> and try this out in Chrome 34 in addition to my current default of Chrome 35. And it always works. So the problem definitely appears to be resolved. Yay!<br /><br />The other Polymer.dart bug is not quite so lucky. <a href="https://code.google.com/p/dart/issues/detail?id=15512">Bound variables</a> in pure Dart are still not updating. They work fine in transformed code, but not in pure Dart / Dartium. The answer here may just be that Polymer.dart does not work unless a transformer is specified in the <code>pubspec.yaml</code>.  But, without a transformer in my <code>pubspec.yaml</code>:<pre class=prettyprint>name: observable_example<br />dependencies:<br />  polymer: any</pre>The <a href="https://www.dartlang.org/polymer-dart/#data-binding">bound variable example</a> from the Polymer.dart homepage does not work for me.<br /><br />In particular, the backing class <i>does</i> work:<br /><pre class=prettyprint>import 'package:polymer/polymer.dart';<br />import 'dart:html';<br /><br />@CustomTag('click-counter')<br />class ClickCounterElement extends PolymerElement {<br />  @observable int count = 0;<br /><br />  ClickCounterElement.created() : super.created();<br /><br /><b>  void increment(Event e, var detail, Node target) {<br />    count += 1;<br />    print(count);<br />  }</b><br />}</pre>But…<br /><br />When the “Click Me” button in the template is clicked, invoking <code>increment()</code>, the updated count is printed to the console, but the bound variable is not updated in the UI:<br /><br /><a href="http://3.bp.blogspot.com/-COv-ShOgR8c/U3RAXPeJy_I/AAAAAAAAZOw/k6somZQccmU/s1600/02-not_obversable.png" imageanchor="1" ><img border="0" src="http://3.bp.blogspot.com/-COv-ShOgR8c/U3RAXPeJy_I/AAAAAAAAZOw/k6somZQccmU/s400/02-not_obversable.png" /></a><br /><br />I update the bug report with my findings. It is nice that this now works if a transformer is specified in <code>pubspec.yaml</code>. Even that did not help in the past. Still, it would be nice if the transformer were not needed when throwing together a quick proof of concept for a Polymer. I do not always remember the transformer until later in the development process and it would help not to be tripped up by unexpected behavior like this.<br /><br /><br /><span style="color: #ccc">Day #63</span>  <br /><br /><p class=bottom-chain-links><a href="http://japhr.blogspot.com/2014/05/thankfully-acceptance-tests.html">&lsaquo;prev</a> | <a href="http://japhr.blogspot.com/2013/11/new-chain-patterns-in-polymer.html">My Chain</a> | <a href="http://japhr.blogspot.com/2014/05/from-inkscape-to-polymer.html">next&rsaquo;</a> </p><script>var b_links = document.getElementsByClassName('bottom-chain-links'),      t_links = document.getElementsByClassName('top-chain-links');  if (b_links.length == 1 && t_links.length == 1) {   t_links[0].innerHTML = b_links[0].innerHTML; } </script><img src="http://feeds.feedburner.com/~r/JaphrByChrisStrom/~4/jmcnNQdZU14" height="1" width="1"/>
