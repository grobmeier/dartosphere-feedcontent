---
title: 'An intro to immutability with Dart'
layout: post
published: '2017-04-24T03:28:51+00:00'
feed: 'Stories by Matan Lurey on Medium'
link: 'https://medium.com/dartlang/an-intro-to-immutability-with-dart-d4de871865c7?source=rss-abdbfcd4679f------2'
author:
    name: 'Matan Lurey'
    email: null
    url: null
tags:
    - javascript
    - dartlang
    - immutable
    - dart
    - functional-programming

---

<p>It’s impossible to deny that <a href="https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=2&amp;cad=rja&amp;uact=8&amp;ved=0ahUKEwiM4_LAjLzTAhWDKGMKHbnICLYQFggmMAE&amp;url=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FImmutable_object&amp;usg=AFQjCNEkdj3g887nk6kENS9SYN-2xsqXpw&amp;sig2=hZqSkCh5MKP-OX2w8YyjvQ">immutability</a> is a hot topic in programming, especially front-end programming. Libraries like <a href="https://facebook.github.io/immutable-js/">Immutable.js</a> and other concepts like unidirectional data flow have argued it’s easier to reason about data when it doesn’t change underneath you:</p><blockquote>In object-oriented and functional programming, an <strong>immutable</strong> object (unchangeable object) is an object whose state cannot be modified after it is created. This is in contrast to a mutable object (changeable object), which can be modified after it is created.</blockquote><p>Well, what about Dart? We have a couple concepts that lend themselves well to immutability and immutable objects built-in, starting with the <em>const</em> modifier and <em>const</em> constructor. Not to be confused with <em>const</em> in ES6, which is merely an immutable binding:</p><iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/ea74deee818166289d71ec2e853c434b/href">https://medium.com/media/ea74deee818166289d71ec2e853c434b/href</a></iframe><p>In Dart, <em>const</em> is both an immutable binding <em>and</em> an immutable object:</p><iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/b5c3e18a4ded4290dc78862cec944a62/href">https://medium.com/media/b5c3e18a4ded4290dc78862cec944a62/href</a></iframe><p>All literals (<em>Null, String, int, double, num, bool, Map, List, Symbol</em>) are capable of being <em>const</em>, and it’s possible to create user-types with a <em>const</em> constructor:</p><iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/edfbe695485a73786e4f6746cb8ca8d2/href">https://medium.com/media/edfbe695485a73786e4f6746cb8ca8d2/href</a></iframe><p>Let’s review — <em>const</em> instances are both immutable bindings and <em>enforced</em> at a language level to be both deeply immutable — and also are <em>canonicalized </em>at compile-time — that is, any two instances are considered equivalent, and are only represented by a single instance when running. For example, the following is rather cheap — it only allocates a single instance at runtime:</p><iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/0e956977444eba775eb2be11833f0b5c/href">https://medium.com/media/0e956977444eba775eb2be11833f0b5c/href</a></iframe><p>Want to learn more? <a href="https://www.dartlang.org/guides/language/language-tour#final-and-const">Read the Dart language tour about final and const</a>.</p><h3>Further static checking with package:meta</h3><p>Of course, <em>const</em> is a bit restrictive — you must be able to create a class at compile-time — so you couldn’t for example read a database and create <em>const</em> objects at runtime. We’ve recently introduced the “immutable” annotation with <a href="https://pub.dartlang.org/packages/meta">package:meta</a>:</p><iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/41b36ef3a895268ca40ff6309867409e/href">https://medium.com/media/41b36ef3a895268ca40ff6309867409e/href</a></iframe><p>You can use this annotation to help enforce that developers keep your classes deeply immutable. It won’t be canonicalized like <em>const</em>, but can still be quite helpful for developers.</p><p>I hope this was a nice introduction to immutability. Please let me know in the comments or on twitter if you’d like to learn more about Dart or immutability.</p><img src="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=d4de871865c7" width="1" height="1"><hr><p><a href="https://medium.com/dartlang/an-intro-to-immutability-with-dart-d4de871865c7">An intro to immutability with Dart</a> was originally published in <a href="https://medium.com/dartlang">dartlang</a> on Medium, where people are continuing the conversation by highlighting and responding to this story.</p>
