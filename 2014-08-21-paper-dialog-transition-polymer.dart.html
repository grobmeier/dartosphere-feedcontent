---
title: 'Paper-Dialog-Transition (Polymer.Dart)'
layout: post
published: '2014-08-21T23:59:00-04:00'
feed: 'japh(r) by Chris Strom'
link: 'http://feedproxy.google.com/~r/JaphrByChrisStrom/~3/j2DH5cSLNOw/paper-dialog-transition-polymerdart.html'
author:
    name: 'Chris Strom'
    email: noreply@blogger.com
    url: 'https://plus.google.com/117928918793969810642'
tags:
    - chain
    - dart
    - dartlang
    - 'material design'
    - paper-elements
    - polymer

---

<div class="top-chain-links"></div><br />I love me transitions and animations, so I will take one more day to explore <a href="http://www.polymer-project.org/docs/elements/paper-elements.html">Paper Elements</a> in <a href="https://www.dartlang.org/polymer-dart/">Polymer.dart</a>. Paper are the <a href="http://www.polymer-project.org/">Polymer</a> spin on Google's <a href="http://google.com/design/spec">Material Design</a>. Although I still worry that Material tends to look too Googly, I cannot argue with the concepts and emphasis that Material has for design. So I keep playing and learning.<br /><br />Last night, I created a fairly simple <a href="http://www.polymer-project.org/docs/elements/paper-elements.html#paper-dialog">paper-dialog</a> in Polymer.dart:<br /><br /><a href="http://4.bp.blogspot.com/-krKfEitKArQ/U_ayCLzrCfI/AAAAAAAAenQ/W4HQD_eQNn4/s1600/02-roboto_dialog.png" imageanchor="1"><img border="0" src="http://4.bp.blogspot.com/-krKfEitKArQ/U_ayCLzrCfI/AAAAAAAAenQ/W4HQD_eQNn4/s400/02-roboto_dialog.png" /></a><br /><br />What is most remarkable to me is that it worked so easily. A while back, I could barely get <a href="http://www.polymer-project.org/docs/elements/core-elements.html">Core Elements</a> to work in Polymer.dart. Now both Core and Paper work with ease. The team behind Polymer.dart has been active (thanks folks!). <br /><br />One of the core tenants of Material Design is “Motion with meaning.” There is no motion in my paper-dialog and I can't help but notice that there is a <a href="http://www.polymer-project.org/docs/elements/paper-elements.html#paper-dialog-transition">paper-dialog-transition</a> element. As if that were not enough to tempt me to investigate, the documentation on the JavaScript version is currently empty. So really, I can't help but investigate.<br /><br />My first thought is to use the <code>&lt;paper-dialog-transition&gt;</code> as a drop-in replacement for last night's <code>&lt;paper-dialog&gt;</code>:<br /><pre class="prettyprint"><b>    &lt;paper-dialog-transition heading="Title for dialog" opened="true"&gt;</b><br />      &lt;p&gt;Lorem ipsum ....&lt;/p&gt;<br />      &lt;p&gt;Id qui scripta ...&lt;/p&gt;<br />      &lt;paper-button label="More Info..." dismissive&gt;&lt;/paper-button&gt;<br />      &lt;paper-button label="Decline" affirmative&gt;&lt;/paper-button&gt;<br />      &lt;paper-button label="Accept" affirmative autofocus&gt;&lt;/paper-button&gt;<br />    &lt;/paper-dialog-transition&gt;</pre>I also add the appropriate <code>&lt;link></code> import of paper-dialog-transition to the document <code>&lt;head></code>:<pre class=prettyprint><code>  &lt;head><br />    &lt;!-- Load platform polyfills --><br />    &lt;script src="packages/web_components/platform.js">&lt;/script><br />    &lt;script src="packages/web_components/dart_support.js">&lt;/script><br /><br />    &lt;!-- Load component(s) --><br /><b>    &lt;link rel="import"<br />          href="packages/paper_elements/paper_dialog_transition.html"></b><br />    &lt;link rel="import"<br />          href="packages/paper_elements/paper_dialog.html"><br />    &lt;link rel="import"<br />          href="packages/paper_elements/paper_button.html"><br /><br />    &lt;!-- Start Polymer --><br />    &lt;script type="application/dart"><br />      export 'package:polymer/init.dart';<br />    &lt;/script><br />  &lt;/head></code></pre>But that does not work. Loading the page, I do not find a pre-opened dialog. I find nothing. If I query in Chrome's JavaScript console for <code>paper-dialog-transition</code> elements, I find not one, but three:<br /><br /><a href="http://1.bp.blogspot.com/-5vQfOJYzKXA/U_a-1q8IcCI/AAAAAAAAenc/_1vRY7wJnEs/s1600/01-three_paper_dialog_transitions.png" imageanchor="1"><img border="0" src="http://1.bp.blogspot.com/-5vQfOJYzKXA/U_a-1q8IcCI/AAAAAAAAenc/_1vRY7wJnEs/s400/01-three_paper_dialog_transitions.png" /></a><br /><br />The first two are added by the Polymer transformer in <a href="http://pub.dartlang.org/">Dart Pub</a>. The last is the real one that I added. And it does not behave like a <code>&lt;polymer-dialog&gt;</code>:<br /><pre class="prettyprint">&gt; d = document.querySelectorAll('paper-dialog-transition')[2]<br />    &lt;paper-dialog-transition heading=​"Title for dialog" opened=​"true" hidden&gt;​…​&lt;/paper-dialog-transition&gt;​<br />&gt; d.toggle()<br />    TypeError: undefined is not a function</pre>It seems like <code>&lt;paper-dialog-transition&gt;</code> is adding those first two copies of itself for a reason. I am ultimately unable to figure out why by reading the code. Or rather, I stumble across some demo code that seems to do use the element.<br /><br />The key seems to be using the IDs of the extra <code>&lt;paper-dialog-transition&gt;</code> elements in transition attributes of <code>&lt;paper-dialog&gt;</code> elements:<br /><pre class="prettyprint"><code>    &lt;paper-dialog heading="Bottom Dialog" <b>transition="paper-dialog-transition-bottom"</b>&gt;<br />      &lt;p&gt;Lorem ipsum ....&lt;/p&gt;<br />      &lt;p&gt;Id qui scripta ...&lt;/p&gt;<br />      &lt;paper-button label="More Info..." dismissive&gt;&lt;/paper-button&gt;<br />      &lt;paper-button label="Decline" affirmative&gt;&lt;/paper-button&gt;<br />      &lt;paper-button label="Accept" affirmative autofocus&gt;&lt;/paper-button&gt;<br />    &lt;/paper-dialog&gt;</code></pre>I add a similar <code>&lt;paper-dialog&gt;</code> with a <code>transition</code> of <code>paper-dialog-transition-center</code>.<br /><br />The final piece of the puzzle comes directly from the demo page. I add two buttons that invoked the <code>toggle()</code> method on the appropriate dialog:<br /><pre class="prettyprint"><code>    &lt;paper-button label="Bottom" onclick="toggleDialog('paper-dialog-transition-bottom')"&gt;&lt;/paper-button&gt;<br />    &lt;paper-button label="Center" onclick="toggleDialog('paper-dialog-transition-center')"&gt;&lt;/paper-button&gt;<br />  &lt;script&gt;<br />    function toggleDialog(transition) {<br />      var dialog = document.<br />        querySelector('paper-dialog[transition=' + transition + ']');<br />      dialog.toggle();<br />    }<br />  &lt;/script&gt;</code></pre>The result is quite pleasing pair of dialog transitions. One travels up from the bottom of the page, the other expands from the center:<br /><br /><div class="separator" style="clear: both; text-align: center;"><object width="320" height="266" class="BLOG_video_class" id="BLOG_video-560491fa2775e6f2" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="movie" value="//www.youtube.com/get_player"><param name="bgcolor" value="#FFFFFF"><param name="allowfullscreen" value="true"><param name="flashvars" value="flvurl=http://redirector.googlevideo.com/videoplayback?id%3D560491fa2775e6f2%26itag%3D5%26source%3Dblogger%26app%3Dblogger%26cmo%3Dsensitive_content%3Dyes%26ip%3D0.0.0.0%26ipbits%3D0%26expire%3D1412900928%26sparams%3Dip,ipbits,expire,id,itag,source%26signature%3D44574B522E07D6E6D96BB792C16C0783038BD91B.61B4CDF488D054B7CD89E8497D088A2B1DBA3FC9%26key%3Dck2&amp;iurl=http://video.google.com/ThumbnailServer2?app%3Dblogger%26contentid%3D560491fa2775e6f2%26offsetms%3D5000%26itag%3Dw160%26sigh%3D5zgAcEl5Ws4nCy8TGv4pXfTSmdo&amp;autoplay=0&amp;ps=blogger"><embed src="//www.youtube.com/get_player" type="application/x-shockwave-flash" width="320" height="266" bgcolor="#FFFFFF" flashvars="flvurl=http://redirector.googlevideo.com/videoplayback?id%3D560491fa2775e6f2%26itag%3D5%26source%3Dblogger%26app%3Dblogger%26cmo%3Dsensitive_content%3Dyes%26ip%3D0.0.0.0%26ipbits%3D0%26expire%3D1412900928%26sparams%3Dip,ipbits,expire,id,itag,source%26signature%3D44574B522E07D6E6D96BB792C16C0783038BD91B.61B4CDF488D054B7CD89E8497D088A2B1DBA3FC9%26key%3Dck2&iurl=http://video.google.com/ThumbnailServer2?app%3Dblogger%26contentid%3D560491fa2775e6f2%26offsetms%3D5000%26itag%3Dw160%26sigh%3D5zgAcEl5Ws4nCy8TGv4pXfTSmdo&autoplay=0&ps=blogger" allowFullScreen="true" /></object></div><br />The <code>&lt;paper-dialog-transition></code> transitions work nicely with the <code>&lt;paper-dialog></code> elements. Toggling the dialog, clicking elsewhere, clicking decline, even hitting escape all result in the transition reversing itself.  All I needed to make this work was the addition of <code>transition</code> attributes and the import of <code>paper_dialog_transition.html</code> (removing this import disables the transitions).<br /><br />I have to admit that the usage of <code>&lt;paper-dialog-transition></code> was not obvious to me. By extension, I have the feeling that I am a little weak on core-transition-css (which paper-dialog-transition extends). This may be worth a little more exploration. Tomorrow. <br /><br /><span style="color: #cccccc;">Day #159</span>  <br /><br /><div class="bottom-chain-links"><a href="http://japhr.blogspot.com/2014/08/paper-dialogs-with-polymerdart.html">‹prev</a> | <a href="http://japhr.blogspot.com/2013/11/new-chain-patterns-in-polymer.html">My Chain</a> | <a href="http://japhr.blogspot.com/2014/08/getting-started-with-core-style-for.html">next›</a> </div><script>var b_links = document.getElementsByClassName('bottom-chain-links'),      t_links = document.getElementsByClassName('top-chain-links');  if (b_links.length == 1 && t_links.length == 1) {   t_links[0].innerHTML = b_links[0].innerHTML; } </script><img src="http://feeds.feedburner.com/~r/JaphrByChrisStrom/~4/j2DH5cSLNOw" height="1" width="1"/>
