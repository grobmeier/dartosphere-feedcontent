---
title: 'A Simple Proxy Pattern in Dart'
layout: post
published: '2016-01-09T23:14:00-08:00'
feed: 'japh(r) by Chris Strom'
link: 'http://feedproxy.google.com/~r/JaphrByChrisStrom/~3/rsz9V00rZOQ/a-simple-proxy-pattern-in-dart.html'
author:
    name: 'Chris Strom'
    email: noreply@blogger.com
    url: 'https://plus.google.com/117928918793969810642'
tags:
    - chain
    - dart
    - dartlang
    - 'design patterns'
    - 'proxy pattern'

---

<div class=top-chain-links></div><br />I start my exploration of the <a href="https://en.wikipedia.org/wiki/Proxy_pattern">proxy pattern</a> tonight by looking at the protection version of the pattern. I rather like the simplicity of the example used on the Wikipedia page, so I start there, adapting the code to <a href="http://dartlang.org">Dart</a>.<br /><br />The subject of this example is an <code>Automobile</code> which can be driven:<pre class="prettyprint">// Subject<br />abstract class Automobile {<br />  void drive();<br />}</pre>The proxy and real subjects will implement this (simple) interface. The real subject, a <code>Car</code>, includes possibly scary business logic that should be kept out of irresponsible hands:<pre class=prettyprint>// Real Subject<br />class Car implements Automobile {<br />  void drive() {<br />    print("Car has been driven!");<br />  }<br />}</pre>The proxy subject is where the action takes place. The constructor requires a <code>Driver</code>, which will be used to determine of the real subject needs protection:<pre class=prettyprint>// Proxy Subject<br />class ProxyCar implements Automobile {<br />  Driver _driver;<br />  Car _car;<br /><br />  ProxyCar(this._driver) {<br />    _car = new Car();<br />  }<br />  // ...<br />}</pre>In addition to storing the driver, the constructor also creates an instance of the real subject. Neither the driver nor the real subject need to be accessed from outside the class, so both are declared private.<br /><br />Last up, I implement the <code>drive()</code> from the <code>Automobile</code> interface. If the driver is too young, then access is denied, otherwise the <code>drive()</code> method on the real subject is invoked:<pre class=prettyprint>// Proxy Subject<br />class ProxyCar implements Automobile {<br />  // ...<br />  void drive() {<br />    if (_driver.age <= 16) {<br />      print("Sorry, the driver is too young to drive.");<br />      return;<br />    }<br /><br />    _car.drive();<br />  }<br />}</pre>And that is all there is to the protection proxy. Client code can create an instance of the ProxyCar for an underage driver and a proper age drive, trying to drive both:<pre class=prettyprint><code>  Automobile car;<br /><br />  // Proxy will deny access to real subject<br />  print("* 16 year-old drive here:");<br />  car = new ProxyCar(new Driver(16));<br />  car.drive();<br />  print('');<br /><br />  // Proxy will allow access to real subject<br />  print("* 25 year-old drive here:");<br />  car = new ProxyCar(new Driver(25));<br />  car.drive();<br />  print('');</code></pre>With that, one car is prevented from being driven while the other works fine:<pre class=prettyprint>$ ./bin/drive.dart<br />* 16 year-old drive here:<br />Sorry, the driver is too young to drive.<br /><br />* 25 year-old drive here:<br />Car has been driven!<br /></pre>And there you go, a simple protection proxy pattern implementation in a few lines of Dart.  <p><i>Play with the code on DartPad: <a href="https://dartpad.dartlang.org/43ea1a7ec5c1684452fc">https://dartpad.dartlang.org/43ea1a7ec5c1684452fc</a>.</i></p><span style="color: #ccc">Day #59</span>    <p class=bottom-chain-links><a href="http://japhr.blogspot.com/2016/01/the-adapter-and-dependency-inversion.html">&lsaquo;prev</a> | <a href="http://japhr.blogspot.com/2015/11/design-patterns-in-dart.html">My Chain</a> | <a href="http://japhr.blogspot.com/2016/01/dart-doesnotunderstand-proxies.html">next&rsaquo;</a> </p><script>var b_links = document.getElementsByClassName('bottom-chain-links'),      t_links = document.getElementsByClassName('top-chain-links');  if (b_links.length == 1 && t_links.length == 1) {   t_links[0].innerHTML = b_links[0].innerHTML; } </script><img src="http://feeds.feedburner.com/~r/JaphrByChrisStrom/~4/rsz9V00rZOQ" height="1" width="1" alt=""/>
