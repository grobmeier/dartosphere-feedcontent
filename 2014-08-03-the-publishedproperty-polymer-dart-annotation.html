---
title: 'The PublishedProperty Polymer Dart Annotation'
layout: post
published: '2014-08-03T23:59:00-04:00'
feed: 'japh(r) by Chris Strom'
link: 'http://feedproxy.google.com/~r/JaphrByChrisStrom/~3/zz2GbabdO-M/the-publishedproperty-polymer-dart.html'
author:
    name: 'Chris Strom'
    email: noreply@blogger.com
    url: 'https://plus.google.com/117928918793969810642'
tags:
    - chain
    - dart
    - dartlang
    - polymer

---

<div class=top-chain-links></div><br />There seems to be a good amount of confusion surrounding the new <code>@PublishedProperty</code> annotation in version 0.12 of <a href="https://www.dartlang.org/polymer-dart/">Polymer.dart</a>. Fair enough, I am always good for piling on more confusion. <br /><br />Consider my venerable <code>&lt;x-pizza></code> element. I might want to publish it with an attribute that specifies a specialty pizza name:<pre class=prettyprint><code>      &lt;h1>Ye Olde Dart Pizza Shoppe&lt;/h1><br />      <b>&lt;x-pizza special_name="Plain">&lt;/x-pizza></b></code></pre>In older version of Polymer.dart, I would have supported this with a <code>@published</code> annotation in the backing class like so:<pre class=prettyprint>@CustomTag('x-pizza')<br />class XPizza extends PolymerElement {<br />  // ...<br />  <b>@published special_name;</b><br />  // ...<br />}</pre>The new way of expressing this same intent is:<pre class=prettyprint>@CustomTag('x-pizza')<br />class XPizza extends PolymerElement {<br />  // ...<br />  @published<br />  String get special_name => readValue(#special_name);<br />  set special_name(String newValue) => writeValue(#special_name, newValue);<br />  // ...<br />}</pre>This is… pretty ugly. My understanding is that there are “timing” issues that necessitate writing it like that, but unless I experience said issues, I would likely continue using the old version.<br /><br />Anyhow, I am trying to play with the <code>@PublishedProperty</code> annotation. At first, I try using this like the regular <code>@published</code> annotation:<pre class=prettyprint>@CustomTag('x-pizza')<br />class XPizza extends PolymerElement {<br />  // ...<br /><b>  @PublishedProperty</b><br />  String get special_name => readValue(#special_name);<br />  set special_name(String newValue) => writeValue(#special_name, newValue);<br />  // ...<br />}</pre>But am greeted by a nasty error when trying to serve this element via <code>pub serve</code>:<pre class=prettyprint></pre><br />I rewrite this as:<pre class=prettyprint>@CustomTag('x-pizza')<br />class XPizza extends PolymerElement {<br />  // ...<br />  @PublishedProperty(reflect: true)<br />  String get special_name => readValue(#special_name);<br />  set special_name(String newValue) => writeValue(#special_name, newValue);<br />  // ...<br />}</pre>Which re-published the attribute back to the element itself:<br /><br /><br /><br /><span style="color: #ccc">Day #142</span>  <br /><br /><p class=bottom-chain-links><a href="http://japhr.blogspot.com/2014/08/switching-from-jasmine-to-mocha-for.html">&lsaquo;prev</a> | <a href="http://japhr.blogspot.com/2013/11/new-chain-patterns-in-polymer.html">My Chain</a> | <span style="color: #ccc">next&rsaquo;</span> </p><script>var b_links = document.getElementsByClassName('bottom-chain-links'),      t_links = document.getElementsByClassName('top-chain-links');  if (b_links.length == 1 && t_links.length == 1) {   t_links[0].innerHTML = b_links[0].innerHTML; } </script><img src="http://feeds.feedburner.com/~r/JaphrByChrisStrom/~4/zz2GbabdO-M" height="1" width="1"/>
