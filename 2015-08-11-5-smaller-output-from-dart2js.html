---
title: '5% smaller output from dart2js'
layout: post
published: '2015-08-11T06:16:00-07:00'
feed: 'Dart News & Updates'
link: 'http://news.dartlang.org/2015/08/5-smaller-output-from-dart2js.html'
author:
    name: 'Anders Thorhauge Sandholm'
    email: noreply@blogger.com
    url: 'http://www.blogger.com/profile/02074725733613485890'

---

dart2js now produces up to 5% smaller output in the latest <a href="https://www.dartlang.org/downloads/">dev channel release</a> of the Dart SDK.<br /><div class="separator" style="clear: both; text-align: center;"><span style="font-family: Arial; font-size: 14.6666666666667px; margin-left: 1em; margin-right: 1em; vertical-align: baseline; white-space: pre-wrap;"><img height="200" src="https://lh4.googleusercontent.com/VLlZq0AE8Xy48MJ1vdOukOfG0bsPbPrO-E-kKgZij-ltm3JigF9K86NlCwmKWYKuy1UPkTzqVlcMbSi2SJNpvXe0XpvlblHZecg7J-OdT7v_q_4dyiPV9rCYJoSBr0Qsn2e1cfI" style="border: none; transform: rotate(0rad);" width="200" /></span></div>We measured a 5% reduction on the minified and zipped dart2js output for one of the larger Dart-based apps in Google with source code size around 17MB. While we’ve seen a 5% reduction on a large app, your milage may vary and improvements are expected to increase with the size of your app. This improvement comes on top of a previous 3% reduction since the beginning of this year. <br /><div class="separator" style="clear: both; text-align: center;"><span style="font-family: Arial; font-size: 14.6666666666667px; margin-left: 1em; margin-right: 1em; vertical-align: baseline; white-space: pre-wrap;"><img src="https://lh3.googleusercontent.com/lRwHlcGky9V9-8dUog9sOHM0NH9L9907MVljPLRU6yL8S0ebaw5qPt-jybEkcf6fiLjJ_pfJK4_SWKScZpQfe0f9Syc2KfxbkimvhSHzuhvo3q_IiW-JSjOcbCs6h3mGh_e3Xi4" style="border: none; transform: rotate(0rad);" /></span></div>The idea behind the latest improvement is quite simple: The symbols that will occur most often in the generated output should be assigned the shortest minified names. So when minifying the code, we rename according to the frequency of each symbol in such a way that a high frequency results in a short name in the output.<br /><br />This new frequency-based namer generally produces smaller output, which is great for deployment. It does however also result in different name allocations and thus “diffing” before/after the change will not produce useful outcomes. Furthermore, with the new scheme a small change in the Dart program might lead to major changes in the naming in the output. If output stability is more important than output size, you can still use the old namer. Simply use the option <span style="font-family: Courier New, Courier, monospace;">--no-frequency-based-minification</span> when invoking dart2js.<br /><br />We are making the new improved namer available on dev channel to get early feedback from you in time before the first release of 1.12 on the stable channel expected later this summer. Please give it a try and <a href="https://github.com/dart-lang/sdk/issues/new">report</a>&nbsp;any bugs you might find.<br /><br /><i>Posted by Stephan Herhut, Frequency-Based Minifier</i><br /><div><br /></div>
