---
title: 'Building A Notepad with Dart Angular 2 : Part Four'
layout: post
published: '2016-09-28T20:42:00+01:00'
feed: 'Diving Into Dart'
link: 'http://divingintodart.blogspot.com/2016/09/building-notepad-with-dart-angular-2_28.html'
author:
    name: 'Davy Mitchell'
    email: noreply@blogger.com
    url: 'https://plus.google.com/112216803316701197594'
tags:
    - Angular2
    - 'Dart SDK'

---

<i>Another step in my personal 'Learn Angular 2' project... Here's some details of what made it into v0.04.</i> <p>Services are a core part of Angular (inject-able units of functionality). They are inject-able in that the responsibility of creating the service is the Angular frameworks and any object using it receives a fully configured service when that object is created.</p> <a href="https://1.bp.blogspot.com/-15CP56XzQuI/V-wZ8m0gmEI/AAAAAAABTTk/gk6NyNmTLZ4GDepuV4_swe9fykIvW4pFgCLcB/s1600/Screenshot%2Bat%2B2016-09-28%2B20%253A27%253A02.png" imageanchor="1" ><img border="0" src="https://1.bp.blogspot.com/-15CP56XzQuI/V-wZ8m0gmEI/AAAAAAABTTk/gk6NyNmTLZ4GDepuV4_swe9fykIvW4pFgCLcB/s320/Screenshot%2Bat%2B2016-09-28%2B20%253A27%253A02.png" width="320" height="172" /></a> <p>Okay that's a bit abstract - what does it mean for np8080? Well, there are a number of methods that process the data in the text document. Let's extract all that into a text processing service class</p> <pre style="padding: 3px 5px; border: 3px double silver;"><br />import 'dart:math';<br /><br />import 'package:angular2/core.dart';<br /><br />@Injectable()<br />class TextProcessingService {<br /><br />  String trimText(String src) {<br />    return src.trim();<br />  }<br /><br />  int getWordCount(String text) {<br />    String workingText = text;<br />    workingText = workingText.replaceAll('\n', ' ');<br />    List<String> words = workingText.split(' ');<br />    words.removeWhere((word) => word.length == 0 || word == " ");<br />    return min(words.length, text.length);<br />  }<br /><br />  int getLineCount(String text) {<br />    return '\n'<br />        .allMatches(text)<br />        .length;<br />  }<br />}<br /></pre> <p>This is a regular class other than the <b>@Injectable()</b> next to the class declaration.</p> <p>This service can be used in any part of our application by injecting it in the constructor. Wait a second how does Angular know how to get this service for the consumer object? We let Angular know via <b>providers</b> statement when we are declaring a component. This can be seen in the updated StatusComponent. Note that _textProcessingService can be declared <i>final</i> as it is assigned once at creation time.</p><pre style="padding: 3px 5px; border: 3px double silver;"><br />import 'package:angular2/core.dart';<br />import 'package:np8080/services/textprocessingservice.dart';<br /><br />@Component(<br />    selector: 'text-status',<br />    templateUrl: 'status_component.html',<br />    providers: const [TextProcessingService])<br />class StatusComponent {<br /><br />  final TextProcessingService _textProcessingService;<br /><br />  StatusComponent(this._textProcessingService);<br /><br />  @Input('text')<br />  String text;<br /><br />  @Input('modified')<br />  DateTime modified;<br /><br />  String get length => text.length.toString();<br /><br />  String get wordCount => _textProcessingService.getWordCount(text).toString();<br /><br />  String get lineCount => _textProcessingService.getLineCount(text).toString();<br />}<br /><br /></pre> <p>That's it for this time. A few other visual tweaks have gone in. Check the app out <b><a href="http://np8080.win">np8080.win</a></b> (I though it was worth the $1 to get a domain!) and the code is on <a href="https://github.com/daftspaniel/np8080">GitHub</a>.</p>
