---
title: 'What''s the Difference Between Attribute and Property?'
layout: post
published: '2014-08-07T23:59:00-04:00'
feed: 'japh(r) by Chris Strom'
link: 'http://feedproxy.google.com/~r/JaphrByChrisStrom/~3/5x6lw6t9tus/whats-difference-between-attribute-and.html'
author:
    name: 'Chris Strom'
    email: noreply@blogger.com
    url: 'https://plus.google.com/117928918793969810642'
tags:
    - annotations
    - chain
    - dart
    - dartlang
    - polymer

---

<div class=top-chain-links></div><br />I'll be the first to admit that I am far too obsessed with the new annotations in <a href="https://www.dartlang.org/polymer-dart/">Polymer.dart</a>. No matter what they do, they are not <i>that</i> important to the overall function of Polymer elements—they just make certain things nicer. And yet, I have been investigating (mostly poorly) these things for a week now.<br /><br />And it continues tonight.<br /><br />I have been so deep in trying to understand how these annotations work, that I have not really given much consideration to best practices. That is the whole point of this <a href="http://patternsinpolymer.com/">Patterns in Polymer</a> research, so I will take at least a night to give it some thought. I start with, what is the difference between a property and an attribute?<br /><br />I realize now that this is not an original thought. The mailing list is replete with concerns that the word “attribute” is not used in at least some of these annotations, but I had not understood the annotations well enough to join in the consternation. I now know that the <code>@PublishedProperty</code> annotation is used for… attributes. And I think that <code>@ComputedProperty</code> is used for properties. This certainly seems confusing, so I first want to double-check this understanding.<br /><br />First up, is <code>@ComputedProperty</code> an attribute like <code>@PublishedProperty</code>? I get the feeling that the “published” part of <code>@PublishedProperty</code> is meant to make it an element attribute, but let's be sure. In my <code>&lt;x-pizza></code> element, I already have a <code>special_name</code> attribute that is updated when certain conditions are met. It is an attribute by virtue of the <code>@PublishedProperty</code> annotation in the backing class:<pre class=prettyprint>@CustomTag('x-pizza')<br />class XPizza extends PolymerElement {<br />  // ...<br /><b>  @PublishedProperty(reflect: true)<br />  String get special_name => readValue(#special_name);</b><br />  set special_name(String newValue) => writeValue(#special_name, newValue);<br />  // ...<br />}</pre>The <code>reflect</code> option indicates that changes will be reflected in the attributes in the DOM. This works just fine. One of the conditions updates the specialty pizza name from “Plain” if the first half has pepperoni on it:<br /><br /><a href="http://2.bp.blogspot.com/-BCA4HOW9quk/U-RJ6u7AK3I/AAAAAAAAd3w/qmV4YdXqTTA/s1600/01-special_name_published_property.png" imageanchor="1" ><img border="0" src="http://2.bp.blogspot.com/-BCA4HOW9quk/U-RJ6u7AK3I/AAAAAAAAd3w/qmV4YdXqTTA/s640/01-special_name_published_property.png" /></a><br /><br />So is <code>@ComputedProperty</code> an attribute? I declare the <code>num_toppings</code> computed attribute as the sum of toppings on various sides of the pizza:<pre class=prettyprint>@CustomTag('x-pizza')<br />class XPizza extends PolymerElement {<br />  // ...<br /><b>  @ComputedProperty("firstHalf.model.length + secondHalf.model.length + whole.model.length")<br />  int get num_toppings => readValue(#num_toppings);</b><br /><br />  @PublishedProperty(reflect: true)<br />  String get special_name => readValue(#special_name);<br />  set special_name(String newValue) => writeValue(#special_name, newValue);<br />  // ...<br />}</pre>If I set a listener on this element:<pre class=prettyprint><code>  // ...<br />  XPizza.created(): super.created() {<br /><b>    changes.listen((changes){<br />      print(changes);<br />    });</b><br />  }<br />  // ...</code></pre>Then I see this value change as I add toppings:<pre class=prettyprint>[#&lt;PropertyChangeRecord Symbol("num_toppings") from: 3 to: 4>]</pre>But, if I add this as an attribute on the element:<pre class=prettyprint><code>      &lt;h1>Ye Olde Dart Pizza Shoppe&lt;/h1><br /><b>      &lt;x-pizza special_name="Plain" num_toppings="">&lt;/x-pizza></b></code></pre>Then I do <i>not</i> see values being updated. So <code>@ComputedProperty</code> is not an attribute:<br /><br /><a href="http://1.bp.blogspot.com/-wyC78rAeN_c/U-RMQMfByBI/AAAAAAAAd34/tFd2zWogjFY/s1600/01-computed_property_is_not_an_attribute.png" imageanchor="1" ><img border="0" src="http://1.bp.blogspot.com/-wyC78rAeN_c/U-RMQMfByBI/AAAAAAAAd34/tFd2zWogjFY/s640/01-computed_property_is_not_an_attribute.png" /></a><br /><br />Which, in my mind, begs the question, how you make a computed property an attribute? Putting <code>reflect: true</code> in the annotation does not work (it only accepts a single argument with no optional parameters. Stacking the <code>@PublishedProperty</code> annotation on top of <code>@ComputedProperty</code> seems to ignore <code>@PublishedProperty</code>:<pre class=prettyprint><code>  @PublishedProperty(reflect: true)<br />  @ComputedProperty("firstHalf.model.length + secondHalf.model.length + whole.model.length")<br />  int get num_toppings => readValue(#num_toppings);</code></pre>The computed changes are still seen, but the attribute is never updated. I try futzing with the <code>readValue()</code> symbol and redefining the <code>num_toppings</code> getter, but to no avail. If there is an easy way to “publish” a <code>@ComputedProperty</code>, I cannot find it. Tonight.<br /><br /><br /><span style="color: #ccc">Day #145</span>  <br /><br /><p class=bottom-chain-links><a href="http://japhr.blogspot.com/2014/08/i-know-what-computedproperty-does.html">&lsaquo;prev</a> | <a href="http://japhr.blogspot.com/2013/11/new-chain-patterns-in-polymer.html">My Chain</a> | <span style="color: #ccc">next&rsaquo;</span> </p><script>var b_links = document.getElementsByClassName('bottom-chain-links'),      t_links = document.getElementsByClassName('top-chain-links');  if (b_links.length == 1 && t_links.length == 1) {   t_links[0].innerHTML = b_links[0].innerHTML; } </script><img src="http://feeds.feedburner.com/~r/JaphrByChrisStrom/~4/5x6lw6t9tus" height="1" width="1"/>
