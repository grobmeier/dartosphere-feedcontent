---
title: 'Why Am I Getting a FOUC Warning in Polymer.dart?'
layout: post
published: '2014-09-30T23:59:00-04:00'
feed: 'japh(r) by Chris Strom'
link: 'http://feedproxy.google.com/~r/JaphrByChrisStrom/~3/EwAd4tJxook/why-am-i-getting-fouc-warning-in.html'
author:
    name: 'Chris Strom'
    email: noreply@blogger.com
    url: 'https://plus.google.com/117928918793969810642'
tags:
    - chain
    - dart
    - dartlang
    - polymer
    - testing

---

<div class=top-chain-links></div><br />The bad news is that I have a weird message popping up in some chapter projects from <a href="http://patternsinpolymer.com/">Patterns in Polymer</a>. The good news is that I finally have the project code for every single chapter in under test (<a href="http://dartlang.org">Dart</a> and JavaScript). Some chapters have better test coverage than others, but coverage, once established, will only improve. <br /><br />But what good is having tests if the underlying code is producing warnings?<br /><br /><a href="http://4.bp.blogspot.com/-RNL5jimIpLQ/VCt3P5YEm1I/AAAAAAAAft4/-8RpH_KBXrE/s1600/01-fouc_warning.png" imageanchor="1" ><img border="0" src="http://4.bp.blogspot.com/-RNL5jimIpLQ/VCt3P5YEm1I/AAAAAAAAft4/-8RpH_KBXrE/s400/01-fouc_warning.png" /></a><br /><br />This may be specific to <a href="https://www.dartlang.org/polymer-dart/">Polymer.dart</a>—I have not seen it in any of the JavaScript elements. But still, if I have a choice between no warning and some warnings, I will opt for the former.<br /><br />This particular Polymer element is working as far as I can tell. But it still displays the following warning:<pre class=prettyprint>Custom element found in document body without an "unresolved" attribute on it or one of its parents. This means your app probably has a flash of unstyled content before it finishes loading. <br />web/index.html:24:7<br />&lt;hello-you></pre>Flash of unstyled content is <a href="https://www.polymer-project.org/articles/styling-elements.html#preventing-fouc">a big deal</a> in <a href="http://www.polymer-project.org/">Polymer</a>. Really, it is a big deal anywhere that styles might get applied after content has already rendered. Unstyled or incompletely styled content on a page looks unprofessional. So I understand why this warning exists.<br /><br />I can even fix the problem easily—just add <code>unresolved</code> to my element in the containing page:<pre class=prettyprint><code>    &lt;div class="container"><br />      &lt;hello-you <b>unresolved</b>><br />        &lt;p>Introduce yourself for an amazing personalized experience!&lt;/p><br />      &lt;/hello-you><br />    &lt;/div></code></pre>But I do not know why this problem occurs in some of my Polymer elements, but not others. As an aside, I still dig seeing the warning directly in the browser (in development mode).<br /><br />Eventually, I figure out that this occurs in custom Polymer elements that have distributed nodes. In the above, the <code>&lt;p></code> is distributed into the Polymer element's shadow DOM. Once I realize this, I see that it does, in fact, get FOUC'd:<br /><br /><a href="http://4.bp.blogspot.com/-W4yjlFjNb_c/VCt9dOwKAMI/AAAAAAAAfuE/Vg6Pp88UDOs/s1600/02-fouc.png" imageanchor="1" ><img border="0" src="http://4.bp.blogspot.com/-W4yjlFjNb_c/VCt9dOwKAMI/AAAAAAAAfuE/Vg6Pp88UDOs/s400/02-fouc.png" /></a><br /><br />When I first load the page, the distributed content is shown without any styles from the <code>&lt;hello-you></code> Polymer element and without being wrapped by the Polymer element. Once Polymer has initialized, this content shifts noticeably into its final location inside the Polymer element. FOUC!<br /><br /><br /><br /><br /><br /><br /><span style="color: #ccc">Day #199</span>  <br /><br /><p class=bottom-chain-links><a href="http://japhr.blogspot.com/2014/09/testing-angular-and-polymerdart.html">&lsaquo;prev</a> | <a href="http://japhr.blogspot.com/2013/11/new-chain-patterns-in-polymer.html">My Chain</a> | <span style="color: #ccc">next&rsaquo;</span> </p><script>var b_links = document.getElementsByClassName('bottom-chain-links'),      t_links = document.getElementsByClassName('top-chain-links');  if (b_links.length == 1 && t_links.length == 1) {   t_links[0].innerHTML = b_links[0].innerHTML; } </script><img src="http://feeds.feedburner.com/~r/JaphrByChrisStrom/~4/EwAd4tJxook" height="1" width="1"/>
