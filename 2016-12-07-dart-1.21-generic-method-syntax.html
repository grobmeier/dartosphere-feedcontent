---
title: 'Dart 1.21: Generic Method Syntax'
layout: post
published: '2016-12-07T09:17:00-08:00'
feed: 'Dart News & Updates'
link: 'http://news.dartlang.org/2016/12/dart-121-generic-method-syntax.html'
author:
    name: 'Michael Thomsen'
    email: noreply@blogger.com
    url: 'http://www.blogger.com/profile/06729956303511012228'

---

Dart 1.21 is now available. It introduces support for generic method syntax along with a few popular convenience features. <a href="https://www.dartlang.org/install">Get it now!</a><br /><br /><h3>Generic method syntax</h3><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://4.bp.blogspot.com/-BZ7O1VACdwM/WEglT0ExynI/AAAAAAAACDQ/iLu_-SZRmjYwqs3SQCdnDdlqaHVzLBOTwCLcB/s1600/GenericMethods.gif" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="https://4.bp.blogspot.com/-BZ7O1VACdwM/WEglT0ExynI/AAAAAAAACDQ/iLu_-SZRmjYwqs3SQCdnDdlqaHVzLBOTwCLcB/s1600/GenericMethods.gif" /></a></div><span id="goog_1834114606"></span><span id="goog_1834114607"></span><br /><br />Until now, Dart's generic support was limited to classes, such as <span style="color: #3d85c6; font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><b>List&lt;T&gt;</b></span>. Dart 1.21 introduces syntax allowing type arguments on methods and functions.<br /><br /><b style="color: #3d85c6; font-family: &quot;Courier New&quot;, Courier, monospace;">&nbsp; &nbsp;T first&lt;T&gt;(List&lt;T&gt; ts) {</b><br /><b style="color: #3d85c6; font-family: &quot;Courier New&quot;, Courier, monospace;">&nbsp; &nbsp; &nbsp;return ts.length == 0 ? throw new ArgumentError('Empty list!') : ts[0];</b><br /><b style="color: #3d85c6; font-family: &quot;Courier New&quot;, Courier, monospace;">&nbsp; &nbsp;}</b><br /><b style="color: #3d85c6; font-family: &quot;Courier New&quot;, Courier, monospace;"><br /></b>Note the return type, <span style="color: #3d85c6; font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><b>T</b></span>. This enables call sites to preserve type information from arguments. Try to write the same function without a type argument, and you'll see that the return type must be <span style="color: #3d85c6; font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><b>Object</b></span> – there is no other way we can make it work on all lists. For more examples, check out the <a href="https://github.com/dart-lang/sdk/blob/master/pkg/dev_compiler/doc/GENERIC_METHODS.md">Using Generic Methods article</a>. For even more details, the <a href="https://gist.github.com/eernstg/4353d7b4f669745bed3a5423e04a453c">informal specification</a> is the place to go.<br /><br />We've had generic methods and functions for a while in <a href="https://github.com/dart-lang/sdk/blob/master/pkg/dev_compiler/STRONG_MODE.md">strong mode</a>. 1.21 introduces support for generic method syntax even without strong mode. Libraries can use this feature and work in both contexts, providing a stepping stone to full generic methods in all Dart code.<br /><br />However, this feature does not yet provide full runtime support for generic methods outside DDC. In particular, <b>type arguments are not reified</b> (i.e., they have no representation at runtime). Libraries must avoid constructs where the runtime value of type arguments matters, in order to work in both modes. For example, <b><span style="color: #3d85c6; font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">x is T</span></b> will not work outside strong mode if <b><span style="color: #3d85c6; font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">T</span></b> is a method type argument. The analyzer marks such cases as errors, so you'll have tool support to avoid them. (Note: If you are using IntelliJ, support is available in <a href="https://confluence.jetbrains.com/display/WI/WebStorm+EAP">WebStorm 2016.3.2 RC</a> / <a href="https://confluence.jetbrains.com/display/IDEADEV/IDEA+2016.3+EAP">IntelliJ IDEA 2016.3.1 RC</a>, and later.)<br /><br /><div><h3>Convenience features</h3><div><br /></div>1.21 also introduces a couple of <a href="https://github.com/dart-lang/sdk/issues/27559">much</a> <a href="https://github.com/dart-lang/sdk/issues/26655">requested</a> convenience features. You can now use <span style="color: #3d85c6; font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><b>=</b></span>&nbsp;to specify a default value for a named argument.<br /><b style="color: #3d85c6; font-family: &quot;Courier New&quot;, Courier, monospace;"><br /></b><b style="color: #3d85c6; font-family: &quot;Courier New&quot;, Courier, monospace;">&nbsp; &nbsp;enableFlags({bool hidden: false}) { … }</b><br /><br />can now be replaced by<br /><b style="color: #3d85c6; font-family: &quot;Courier New&quot;, Courier, monospace;"><br /></b><b style="color: #3d85c6; font-family: &quot;Courier New&quot;, Courier, monospace;">&nbsp; &nbsp;enableFlags({bool hidden = false}) { … }</b><br /><br />We’re also introducing <a href="https://gist.github.com/eernstg/cff159be9e34d5ea295d8c24b1a3e594#file-initializing_formal_access-md">access to initializing formal</a>s, e.g., <span style="color: #3d85c6; font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><b>x</b></span> is now in scope in the initializer list such that we can use it to initialize <span style="color: #3d85c6; font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><b>y</b></span> in this example:<br /><br /><span style="color: #3d85c6; font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><b>&nbsp; &nbsp;class C {&nbsp;</b></span><br /><span style="color: #3d85c6; font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><b>&nbsp; &nbsp; &nbsp;var x, y;&nbsp;</b></span><br /><span style="color: #3d85c6; font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><b>&nbsp; &nbsp; &nbsp;C(this.x): y = x;&nbsp;</b></span><br /><span style="color: #3d85c6; font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><b>&nbsp; &nbsp;}&nbsp;</b></span><br /><br />As with any new language feature, it is critical for package authors to update <span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><b>pubspec.yaml</b></span> with a latest SDK version.<br /><br /><b style="color: #3d85c6; font-family: &quot;Courier New&quot;, Courier, monospace;">&nbsp; &nbsp;name: my_cool_dart_package</b><br /><b style="color: #3d85c6; font-family: &quot;Courier New&quot;, Courier, monospace;">&nbsp; &nbsp;environment:</b><br /><b style="color: #3d85c6; font-family: &quot;Courier New&quot;, Courier, monospace;">&nbsp; &nbsp; &nbsp;sdk: '&gt;=1.21.0 &lt;2.0.0'</b><br /><br />This ensures users on older SDKs aren't broken when they update their packages.<br /><br />For more details on these and other changes in 1.21, see the full <a href="https://github.com/dart-lang/sdk/blob/master/CHANGELOG.md#1210">changelog</a>. Otherwise, <a href="https://www.dartlang.org/install">download the latest release</a>, and <a href="https://www.dartlang.org/community">let us know</a> what you think!</div><div><br /></div>
