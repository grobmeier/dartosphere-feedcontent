---
title: 'Command-Line Polymer.dart Generators'
layout: post
published: '2014-10-05T23:42:00-04:00'
feed: 'japh(r) by Chris Strom'
link: //feedproxy.google.com/~r/JaphrByChrisStrom/~3/aG8B_ay_o5s/command-line-polymerdart-generators.html
author:
    name: 'Chris Strom'
    email: noreply@blogger.com
    url: 'https://plus.google.com/117928918793969810642'
tags:
    - chain
    - dart
    - dartlang
    - polymer

---

<div class=top-chain-links></div><br />I am working on the second in the series of screencasts for readers of the “Extras” edition of <a href="http://patternsinpolymer.com/">Patterns in Polymer</a>. Try as I might, I cannot get it down to under 12 minutes. I would much prefer that they run ~5 minutes, so tonight I explore alternate approaches to code what I need.<br /><br />The goal of this screencast is to build a working <a href="http://www.polymer-project.org/">Polymer</a> element. I am not trying to get all functionality in place in this screencast. Rather, I am trying to get everything in the right place to build the real thing. For the <a href="http://dartlang.org">Dart</a> version of the screencast, I can code up the <code>pubspec.yaml</code>, <code>web/index.html</code>, <code>x-pizza.html</code>, and <code>x_pizza.dart</code> files in 15 minutes. I could probably get that down to 12 minutes, but I need help if I am going to get to 5-8 minutes.<br /><br />I could speed up certain sections of the video or use some pre-written snippets, but I have a slight preference for keeping it real-time. So that means code generation. I would further prefer to use standard generators rather than hand-writing my own. Fortunately, <a href="https://www.dartlang.org/polymer-dart/">Polymer.dart</a> has a few built-in.<br /><br />I start by globally registering Polymer for running scripts:<pre class=prettyprint>$ pub global activate polymer<br />Resolving dependencies... (30.5s)<br />...<br />Activated polymer 0.15.0+1.</pre>Not sure what's up with the 30.5 seconds. Hopefully that's just an internet glitch.<br /><br />Before using any of the generators, I need a project to play about in. I create a temporary directory with a <code>pubspec.yaml</code>:<pre class=prettyprint>$ mkdir tmp<br />$ cd !$<br />$ echo "name: x_pizza" > pubspec.yaml</pre>There are two bin scripts in Polymer 0.15.0+1:<pre class=prettyprint>$ ls ~/.pub-cache/hosted/pub.dartlang.org/polymer-0.15.0+1/bin<br />new_element.dart  <br />new_entry.dart</pre>I will start by creating a new element, which supports the following command-line options:<pre class=prettyprint>$ pub global run polymer:new_element -h<br />pub run polymer:new_element [-o output_dir] [-e super-element] element-name<br />-o, --output-dir    Output directory<br />-e, --extends       Extends polymer-element or DOM element (e.g., div, span)<br />-h, --[no-]help     </pre>So let's create an <code>&lt;x-pizza></code> element:<pre class=prettyprint>$ pub global run polymer:new_element -o lib/elements x-pizza<br />Successfully created:<br />  /home/chris/tmp/lib/elements/x_pizza.dart<br />  /home/chris/tmp/lib/elements/x_pizza.html</pre>And that does exactly what I would expect (and need). The Dart class definition for the element has the boilerplate stuff:<pre class=prettyprint>$ cat lib/elements/x_pizza.dart<br /><b>import 'package:polymer/polymer.dart';</b><br />/**<br /> * A Polymer x-pizza element.<br /> */<br />@CustomTag('x-pizza')<br />class XPizza extends PolymerElement {<br />  /// Constructor used to create instance of XPizza.<br />  XPizza.created() : super.created() {<br />  }<br />  // Commented out lifecycle methods here...<br />}</pre>That alone will save me 30 seconds of typing. Compound it with the HTML template definition and I am getting closer to what I need:<pre class=prettyprint>$ cat lib/elements/x_pizza.html <br />&lt;!-- import polymer-element's definition --><br />&lt;link rel="import" href="../../../packages/polymer/polymer.html"><br />&lt;polymer-element name="x-pizza"><br />  &lt;template><br />    &lt;style><br />      :host {<br />        display: block;<br />      }<br />    &lt;/style><br />    &lt;!-- Template content here --><br />  &lt;/template><br />  &lt;script type="application/dart" src="x_pizza.dart">&lt;/script><br />&lt;/polymer-element></pre>It sure would be nice if I could generate some of the <code>web/index.html</code> smoke test page. And add the Polymer dependency and transformer to my <code>pubspec.yaml</code>, which is still just:<pre class=prettyprint>$ cat pubspec.yaml <br /><b>name: x_pizza</b></pre>Say, maybe that's what the other generator does:<pre class=prettyprint>$ pub global run polymer:new_entry -h            <br /><b>pub run polymer:new_entry entry_point_file.html</b></pre>Well, that help output leaves a lot to the imagination. Fortunately, it too does exactly what I would expect (and need). Well almost:<pre class=prettyprint>$ pub global run polymer:new_entry web/index.html<br /><b>Added web/index.html to /home/chris/tmp/pubspec.yaml<br />Successfully created:<br />  /home/chris/tmp/web/index.html</b></pre>As the output indicates, I now have a Polymer transformer pointing to the smoke test page:<pre class=prettyprint>$ cat pubspec.yaml                               <br />name: x_pizza<br /><b>transformers:<br />- polymer:<br />    entry_points:<br />    - web/index.html</b></pre>A nice-to-have would be adding the Polymer dependency to <code>pubspec.yaml</code>, but this will already help some (especially since I keep omitting the “s” at the end of “transformers” for some reason). <br /><br />What will help even more is the boilerplate smoke test page at <code>web/index.html</code>:<pre class=prettyprint>$ cat web/index.html <br /><b>&lt;!doctype html></b><br />&lt;html><br />  &lt;head><br />    &lt;script src="packages/web_components/dart_support.js">&lt;/script><br />    &lt;!-- link rel="import" href="path_to_html_import.html" --><br />  &lt;/head><br />  &lt;body><br />    &lt;!-- HTML for body here --><br />    &lt;script type="application/dart">export 'package:polymer/init.dart';&lt;/script><br />  &lt;/body><br />&lt;/html><br /></pre>I still have to link to the <code>lib/x_pizza.html</code> import in there, but that will certainly save some time and typing.<br /><br />All-in-all, I am excited about these Polymer Dart generators. I expect they will go a long way to solving my screencast time-crunch. Best of all, they are built right into the Polymer.dart library. Now I just need to find a way to do this with the JavaScript version of the screencast. It may be time to play with the new Yeoman generators. Tomorrow.<br /><br /><br /><span style="color: #ccc">Day #204</span>  <br /><br /><p class=bottom-chain-links><a href="http://japhr.blogspot.com/2014/10/testing-computed-style-in-dart.html">&lsaquo;prev</a> | <a href="http://japhr.blogspot.com/2013/11/new-chain-patterns-in-polymer.html">My Chain</a> | <a href="http://japhr.blogspot.com/2014/10/simple-polymer-generators-with-yeoman.html">next&rsaquo;</a> </p><script>var b_links = document.getElementsByClassName('bottom-chain-links'),      t_links = document.getElementsByClassName('top-chain-links');  if (b_links.length == 1 && t_links.length == 1) {   t_links[0].innerHTML = b_links[0].innerHTML; } </script><img src="//feeds.feedburner.com/~r/JaphrByChrisStrom/~4/aG8B_ay_o5s" height="1" width="1" alt=""/>
