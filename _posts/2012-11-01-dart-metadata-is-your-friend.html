---
title: 'Dart Metadata Is Your Friend'
layout: post
published: '2012-11-01T13:07:00-05:00'
feed: 'phylotic connections'
link: 'http://phylotic.blogspot.com/2012/11/dart-metadata-is-your-friend.html'
author:
    name: 'John Evans'
    email: noreply@blogger.com
    url: 'https://plus.google.com/115427174005651655317'
tags:
    - dart
    - dartlang
    - deprecated
    - metadata
    - override

---

<span style="font-family: inherit;">Metadata is a recent feature addition to the Dart language. &nbsp;The Dart SDK already includes a few metadata tags that (integrated with the Dart Editor) can help you catch common errors, and alert users to deprecated code. &nbsp;In this post, we'll see how to use the two metadata types included in the SDK: '@deprecated' and '@override'</span><br /><span style="font-family: inherit;"><br /></span><br /><h2><span style="font-family: inherit; font-size: large;">What Is Metadata?</span></h2><br /><span style="font-family: inherit;">Metadata is essentially a piece of information that can provide additional context to your code. &nbsp;This information can be used by tools such as Dart Editor, and eventually by your own code via mirror-based reflection.</span><br /><span style="font-family: inherit;"><br /></span><span style="font-family: inherit;">According to the Dart Specification <span style="background-color: white;"><i>"</i></span><i><span style="background-color: white; line-height: 22px;">Metadata can&nbsp;</span><span style="background-color: white; line-height: 22px;">appear before&nbsp;</span><span style="background-color: white; line-height: 22px;">a library, class, typedef, type parameter, constructor, factory, function, field, parameter, or variable declaration and before an import or export directive.</span><span style="background-color: white;">"</span></i></span><br /><span style="font-family: inherit;"><br /></span><h2><span style="font-size: large;">Using The Dart 'meta' Library</span></h2><br />Since this is a package library, you'll need to add a reference to it in your application pubspec, and then run pub install (see <a href="http://pub.dartlang.org/">pub.dartlang.org</a> for more information about this process). &nbsp;Once available, you can import the library like so:<br /><br /><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> import 'package:meta/meta.dart';  <br /></code></pre><br />Now that the metadata types are in scope for your app, it's time to put them to good use!<br /><h2><br /><span style="font-size: large;">Using the @deprecated Metadata Type</span></h2>Let's say you have a class for a function that you no longer want users of your library to use. &nbsp;By marking your object with the @deprecated tag, the Dart editor will strike-through any references to it, giving a great visual clue to the developer that they should use a new approach.<br /><br />First lets look at our function before @deprecated is applied:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-cU4f1BuhF9U/UJK0ALmf9wI/AAAAAAAAGEk/Jyhc3ZyJS7U/s1600/deprecated_before.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-cU4f1BuhF9U/UJK0ALmf9wI/AAAAAAAAGEk/Jyhc3ZyJS7U/s1600/deprecated_before.png" /></a></div>Suddenly foo() isn't so cool anymore and we want to let users of the library know about it. &nbsp;Let's add the @deprecated metadata and see what Dart Editor does:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-Ggvxxj8RL7I/UJK0pYmcI7I/AAAAAAAAGE0/V7UEtJhLbO8/s1600/deprecated_after.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-Ggvxxj8RL7I/UJK0pYmcI7I/AAAAAAAAGE0/V7UEtJhLbO8/s1600/deprecated_after.png" /></a></div>Notice how Dart editor strikes through not only the implementation function, but also any references to that function. &nbsp;Neat huh? &nbsp;The editor also gives other visual clues, such as an informational message and a squiggly underneath the reference.<br /><h2><br /><span style="font-size: large;">Using the @override Metadata Type</span></h2>Now this one I really like, because it's actually helped me catch a few inheritance-related bugs in my code. &nbsp;Let's look at this example where we have a class Bar which inherits from a class Foo, and Bar wants to override some methods in Foo:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-ASdLL7ZXnlM/UJK3CijxZKI/AAAAAAAAGE8/d5BHDXvOKCo/s1600/override.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="400" src="http://2.bp.blogspot.com/-ASdLL7ZXnlM/UJK3CijxZKI/AAAAAAAAGE8/d5BHDXvOKCo/s400/override.png" width="263" /></a></div><br />By using the @override metadata type, we can see that the editor is helping us identify a problem in our Bar class, where we have a typo in the override class name. &nbsp;Notice how we get no help on the 'donothing()' method in Bar, when we probably wanted to override 'doNothing()' in Foo. <br /><br />In larger, non-trivial applications these kinds of bugs can be nasty to track down, if you&nbsp;consider&nbsp;that this code...<br /><br /><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> new Bar().doThat();  <br /></code></pre><br />...will happily execute and give you a result of "doThat" from Foo instead of the expected "Do that other thing." from Bar - leaving you with clenched fists and pulled hair as you try to trace down the problem.. &nbsp;In short, using @override every time you expect to be overriding a superclass method will help you avoid a whole class of bugs in your code.<br /><br /><h2><span style="font-size: large;">Summary</span></h2>Dart's metadata functionality is still in early days, but already proves quite helpful when combined with tools such as the Dart Editor. &nbsp;Liberal use of @deprecated and @override will go along way toward making your code easier to work with and troubleshoot. &nbsp;Give it a try in your code today and give your feedback to the Dart team.<br /><br /><b>References:</b><br /><a href="http://news.dartlang.org/2012/07/draft-spec-changes-for-metadata-in-dart.html">http://news.dartlang.org/2012/07/draft-spec-changes-for-metadata-in-dart.html</a><br /><a href="http://www.dartlang.org/docs/spec/latest/dart-language-specification.html#h.d0rowtffuudf">http://www.dartlang.org/docs/spec/latest/dart-language-specification.html#h.d0rowtffuudf</a>
