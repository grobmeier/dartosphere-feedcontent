---
title: 'The Strange Case of Submitting Forms Containing Polymers'
layout: post
published: '2014-02-03T23:38:00-05:00'
feed: 'japh(r) by Chris Strom'
link: 'http://feedproxy.google.com/~r/JaphrByChrisStrom/~3/Uif83OkladQ/submitting-forms-containing-polymers.html'
author:
    name: 'Chris Strom'
    email: noreply@blogger.com
    url: 'https://plus.google.com/117928918793969810642'
tags:
    - chain
    - dart
    - dartlang
    - javascript
    - polymer

---

<div class=top-chain-links></div><br />OK, I have a ridiculous questions. <i>I mean more ridiculous that usual.</i> What happens when a plain old form is submitted containing a <a href="http://www.polymer-project.org/">Polymer</a>?<br /><br />Hopefully this will be a relatively easy question to answer. With 12 days left before the first edition of <a href="http://patternsinpolymer.com">Patterns in Polymer</a> is due, I need to slam out 5 more chapters (starting with the <a href="http://angularjs.org/">Angular</a> chapter) and edit like a madman. That means scaling back the research. So fingers-crossed that I really have left the easier questions for last.<br /><br />I suspect that input fields contained inside the Polymer (either projected or embedded) will be submitted right along with the input fields from the form in the main web page. There is one good way to find out. I start by modifying an example <a href="https://www.dartlang.org/polymer-dart/">Polymer.dart</a> application:<pre class="prettyprint"><code>      &lt;form action="test" method="post"><br />        &lt;input type=text name="plain_old_param"><br />        &lt;hello-you><br />          &lt;input type=text name="distributed_param"><br />        &lt;/hello-you><br />        &lt;input type=submit value=Play><br />      &lt;/form></code></pre>The <code>plain_old_param</code> input field will definitely be submitted when the form is submitted—it's a plain-old form parameter. The <code>distributed_param</code>, which will be projected into the shadow DOM of the <code>&lt;hello-you></code> Polymer ought be submitted, as should the value of <code>&lt;input value="{{your_name}}"></code> directly inside of the Polymer. I think…<br /><br />As it turns out, when I submit this form:<br /><br /><a href="http://2.bp.blogspot.com/-DNEWmaJcnqA/UvBjxVCVZOI/AAAAAAAAVDE/Dkbd0b_cug8/s1600/01-form_with_polymer.png" imageanchor="1" ><img border="0" src="http://2.bp.blogspot.com/-DNEWmaJcnqA/UvBjxVCVZOI/AAAAAAAAVDE/Dkbd0b_cug8/s640/01-form_with_polymer.png" /></a><br /><br />The only form variables that are being submitted are:<pre class=prettyprint>plain_old_param:plain<br />distributed_param:projected</pre>That surprises me. I believe that this can be explained as the <code>&lt;input></code> inside the Polymer being part of the shadow DOM and, therefore not as a child of the <code>&lt;form></code> element in the page. Along those same lines, the projected <code>&lt;input></code> is just that—projected. It remains a child of the <code>&lt;form></code> in the main page even though it is rendered inside (projected into) the Polymer's <code>&lt;content></code> tags. Still, I thought the shadow DOM being attached to the <code>&lt;hello-you></code> Polymer, which is a child of the <code>&lt;form></code> would allow the Polymer's <code>&lt;input></code> field to be considered as part of the <code>&lt;form></code> as well. I was wrong.<br /><br />That explanation is seemingly supported by the live DOM tree which includes the plain and projected <code>&lt;input></code> fields as active children of the <code>&lt;form></code> whereas the Polymer's input fields are children of a separate document fragment (the Polymer's shadow DOM):<br /><br /><a href="http://1.bp.blogspot.com/-kc59khmWLY4/UvBnFPUI5SI/AAAAAAAAVDQ/NDSyL1TaKfE/s1600/02-polymer_form_dom.png" imageanchor="1" ><img border="0" src="http://1.bp.blogspot.com/-kc59khmWLY4/UvBnFPUI5SI/AAAAAAAAVDQ/NDSyL1TaKfE/s640/02-polymer_form_dom.png" /></a><br /><br />As long as I understand that this is the case, I can live with it. Except…<br /><br />It does not work that way in the JavaScript equivalent. While the <a href="http://dartlang.org">Dart</a> version of the Polymer places the entire contents of the <code>&lt;hello-you></code> element in its own document fragment, then JavaScript version places most of it directly on the page:<br /><br /><a href="http://3.bp.blogspot.com/-Pd0IOQ1IJGM/UvBsWTeU4II/AAAAAAAAVDg/lZ26RH7zq08/s1600/03-js_polymer_embedded_form.png" imageanchor="1" ><img border="0" src="http://3.bp.blogspot.com/-Pd0IOQ1IJGM/UvBsWTeU4II/AAAAAAAAVDg/lZ26RH7zq08/s640/03-js_polymer_embedded_form.png" /></a><br /><br />And, as such, when I submit the form, the embedded form parameter is submitted:<pre class="prettyprint">plain_old_param:plain<br /><b>embedded_polymer_param:embedded</b><br />distributed_param:projected</pre>Ugh.<br /><br />I think my takeaway from all of this is that you'd be crazy to rely on <code>&lt;input></code> fields inside Polymers as plain-old <code>&lt;form></code> inputs. For the most part, that is not a hardship as many of these things will be embedded into an Angular application (or equivalent) in which case data binding can be used. But dang it, sometime folks will want to submit the data contained in these directly to a servers. Seems like I may need a chapter on this as well.<br /><br /><br /><span style="color: #ccc">Day #1,016</span>  <br /><br /><p class=bottom-chain-links><a href="http://japhr.blogspot.com/2014/02/mutationobserver-as-best-dart-practice.html">&lsaquo;prev</a> | <a href="http://japhr.blogspot.com/2013/11/new-chain-patterns-in-polymer.html">My Chain</a> | <a href="http://japhr.blogspot.com/2014/02/submitting-polymer-data-in-plain-old.html">next&rsaquo;</a> </p><script>var b_links = document.getElementsByClassName('bottom-chain-links'),      t_links = document.getElementsByClassName('top-chain-links');  if (b_links.length == 1 && t_links.length == 1) {   t_links[0].innerHTML = b_links[0].innerHTML; } </script><img src="http://feeds.feedburner.com/~r/JaphrByChrisStrom/~4/Uif83OkladQ" height="1" width="1"/>
