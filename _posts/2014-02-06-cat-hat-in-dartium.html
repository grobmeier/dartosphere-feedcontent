---
title: 'Cat Hat in Dartium?'
layout: post
published: '2014-02-06T23:59:00-05:00'
feed: 'japh(r) by Chris Strom'
link: 'http://feedproxy.google.com/~r/JaphrByChrisStrom/~3/BG-5DC0SZ8Y/cat-hat-in-dartium.html'
author:
    name: 'Chris Strom'
    email: noreply@blogger.com
    url: 'https://plus.google.com/117928918793969810642'
tags:
    - chain
    - dart
    - dartlang
    - javascript
    - polymer

---

<div class=top-chain-links></div><br />There was <a href="http://lists.w3.org/Archives/Public/www-style/2014Feb/0103.html">a kerfluffle</a> on the W3 style mailing list the other day. I really try to avoid kerfluffles as much as possible so I won't get into the details. Rather, I simply note that the technical discussion was related to a part of <a href="http://www.polymer-project.org/">Polymer</a> with which I have not played—new CSS selectors.<br /><br />The CSS selectors are the “cat”, so called because it looks like cat ears (<code>^^</code>) and the hat (<code>^</code>). The cat selector works in the shadow DOM of the containing Polymer and any child Polymers with their own shadow DOMs. The hat selector applies to the current Polymer's shadow DOM only.<br /><br />In all honesty the names are probably too clever given their limited utility, but I still must investigate. Before I start, I note that <a href="http://robdodson.me/">Rob Dodson</a> has a much better <a href="http://robdodson.me/blog/2013/11/15/the-cat-and-the-hat-css-selectors/">writeup on the topic</a> than I will here. I learn by playing, but his writeup was more geared toward helping others understand. Still, I need to try this out myself…<br /><br />After some experimentation with these operators in Dartium, it seems that I need to enable a flag <code>chrome://flags</code>:<br /><br /><a href="http://2.bp.blogspot.com/-SbaIvWjQ9a0/UvRiCMiiz_I/AAAAAAAAVSU/QqFnU5y-luI/s1600/01-enable_web_platform.png" imageanchor="1" ><img border="0" src="http://2.bp.blogspot.com/-SbaIvWjQ9a0/UvRiCMiiz_I/AAAAAAAAVSU/QqFnU5y-luI/s640/01-enable_web_platform.png" /></a><br /><br />Unfortunately, that does not seem to work in the <a href="http://www.dartlang.org/dartium/">Dartium</a> that comes with Dart 1.1.1, so... I try compiling to JavaScript. That does not work because of <a href="http://code.google.com/p/dart/issues/detail?id=16194">a range error bug</a>. Sigh, this was meant to be easy!<br /><br />So instead, I try this in JavaScript. In my outside Polymer, I add the following CSS:<pre class=prettyprint>&lt;link rel="import" href="../bower_components/polymer/polymer.html"><br />&lt;style><br /><b>  pricing-plans ^^ p {<br />    font-style: italic;<br />  }<br />  pricing-plans ^ p {<br />    color: red;<br />  }</b><br />&lt;/style><br />&lt;polymer-element name="pricing-plans"><br />  &lt;!-- ... --><br />&lt;/polymer-element><br /></pre>The cat selector should apply to all paragraph tags inside the <code>&lt;pricing-plans></code> Polymer, meaning that all paragraphs should be italicized. The hat selector should only apply to the immediate shadow DOM, meaning that only the paragraph tags inside the outer <code>&lt;pricing-plans></code> tag should be red.<br /><br />And, finally, that actually works:<br /><br /><a href="http://2.bp.blogspot.com/-tm3DwY4aIAI/UvRp7QTvPYI/AAAAAAAAVSk/odmC6yCSxbI/s1600/02-cat_hat_applied.png" imageanchor="1" ><img border="0" src="http://2.bp.blogspot.com/-tm3DwY4aIAI/UvRp7QTvPYI/AAAAAAAAVSk/odmC6yCSxbI/s640/02-cat_hat_applied.png" /></a><br /><br />At least in Chrome with those experimental settings enabled it works. Firefox ignores the non-standard selector and simply applies both cat and hat selectors to all children:<br /><br /><a href="http://2.bp.blogspot.com/-3CHJddmLc1Q/UvRt15rd5TI/AAAAAAAAVSw/5VG3XEBf0zA/s1600/03-cat_hat_in_ff.png" imageanchor="1" ><img border="0" src="http://2.bp.blogspot.com/-3CHJddmLc1Q/UvRt15rd5TI/AAAAAAAAVSw/5VG3XEBf0zA/s640/03-cat_hat_in_ff.png" /></a><br /><br />That was much harder to get running than I expected. At least, once I got it running, it worked pretty much as expected. I still think that this will be of limited use. To be sure, there will be cases where this will be handy, but I suspect that using <code>applyAuthorStyles</code> in a Polymer (to pull in CSS from the containing document) will cover the 80% case.<br /><br /><span style="color: #ccc">Day #1,019</span>  <br /><br /><p class=bottom-chain-links><a href="http://japhr.blogspot.com/2014/02/running-two-dart-scripts-from-same-page.html">&lsaquo;prev</a> | <a href="http://japhr.blogspot.com/2013/11/new-chain-patterns-in-polymer.html">My Chain</a> | <a href="http://japhr.blogspot.com/2014/02/application-css-in-polymers-redux.html">next&rsaquo;</a> </p><script>var b_links = document.getElementsByClassName('bottom-chain-links'),      t_links = document.getElementsByClassName('top-chain-links');  if (b_links.length == 1 && t_links.length == 1) {   t_links[0].innerHTML = b_links[0].innerHTML; } </script><img src="http://feeds.feedburner.com/~r/JaphrByChrisStrom/~4/BG-5DC0SZ8Y" height="1" width="1"/>
